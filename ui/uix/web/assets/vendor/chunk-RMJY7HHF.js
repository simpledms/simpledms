import{a as x,b as Q}from"./chunk-FW4363Y4.js";var ie=x((Di,kt)=>{function ur(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}kt.exports=ur});var Nt=x((Vi,Ot)=>{var cr=typeof global=="object"&&global&&global.Object===Object&&global;Ot.exports=cr});var Pe=x((Gi,At)=>{var dr=Nt(),pr=typeof self=="object"&&self&&self.Object===Object&&self,fr=dr||pr||Function("return this")();At.exports=fr});var Mt=x((Yi,Rt)=>{var hr=Pe(),_r=function(){return hr.Date.now()};Rt.exports=_r});var $t=x((Xi,jt)=>{var mr=/\s/;function gr(t){for(var e=t.length;e--&&mr.test(t.charAt(e)););return e}jt.exports=gr});var Lt=x((Ki,It)=>{var yr=$t(),vr=/^\s+/;function br(t){return t&&t.slice(0,yr(t)+1).replace(vr,"")}It.exports=br});var Ue=x((Ji,zt)=>{var Sr=Pe(),wr=Sr.Symbol;zt.exports=wr});var Wt=x((Zi,Bt)=>{var qt=Ue(),Ht=Object.prototype,xr=Ht.hasOwnProperty,Fr=Ht.toString,J=qt?qt.toStringTag:void 0;function Er(t){var e=xr.call(t,J),s=t[J];try{t[J]=void 0;var r=!0}catch{}var i=Fr.call(t);return r&&(e?t[J]=s:delete t[J]),i}Bt.exports=Er});var Vt=x((Qi,Dt)=>{var Tr=Object.prototype,Pr=Tr.toString;function Ur(t){return Pr.call(t)}Dt.exports=Ur});var Kt=x((en,Xt)=>{var Gt=Ue(),Cr=Wt(),kr=Vt(),Or="[object Null]",Nr="[object Undefined]",Yt=Gt?Gt.toStringTag:void 0;function Ar(t){return t==null?t===void 0?Nr:Or:Yt&&Yt in Object(t)?Cr(t):kr(t)}Xt.exports=Ar});var Zt=x((tn,Jt)=>{function Rr(t){return t!=null&&typeof t=="object"}Jt.exports=Rr});var es=x((sn,Qt)=>{var Mr=Kt(),jr=Zt(),$r="[object Symbol]";function Ir(t){return typeof t=="symbol"||jr(t)&&Mr(t)==$r}Qt.exports=Ir});var is=x((rn,rs)=>{var Lr=Lt(),ts=ie(),zr=es(),ss=NaN,qr=/^[-+]0x[0-9a-f]+$/i,Hr=/^0b[01]+$/i,Br=/^0o[0-7]+$/i,Wr=parseInt;function Dr(t){if(typeof t=="number")return t;if(zr(t))return ss;if(ts(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ts(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Lr(t);var s=Hr.test(t);return s||Br.test(t)?Wr(t.slice(2),s?2:8):qr.test(t)?ss:+t}rs.exports=Dr});var as=x((nn,os)=>{var Vr=ie(),Ce=Mt(),ns=is(),Gr="Expected a function",Yr=Math.max,Xr=Math.min;function Kr(t,e,s){var r,i,n,o,a,l,u=0,d=!1,c=!1,f=!0;if(typeof t!="function")throw new TypeError(Gr);e=ns(e)||0,Vr(s)&&(d=!!s.leading,c="maxWait"in s,n=c?Yr(ns(s.maxWait)||0,e):n,f="trailing"in s?!!s.trailing:f);function p(y){var E=r,U=i;return r=i=void 0,u=y,o=t.apply(U,E),o}function _(y){return u=y,a=setTimeout(m,e),d?p(y):o}function v(y){var E=y-l,U=y-u,A=e-E;return c?Xr(A,n-U):A}function S(y){var E=y-l,U=y-u;return l===void 0||E>=e||E<0||c&&U>=n}function m(){var y=Ce();if(S(y))return g(y);a=setTimeout(m,v(y))}function g(y){return a=void 0,f&&r?p(y):(r=i=void 0,o)}function P(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function O(){return a===void 0?o:g(Ce())}function N(){var y=Ce(),E=S(y);if(r=arguments,i=this,l=y,E){if(a===void 0)return _(l);if(c)return clearTimeout(a),a=setTimeout(m,e),p(l)}return a===void 0&&(a=setTimeout(m,e)),o}return N.cancel=P,N.flush=O,N}os.exports=Kr});var us=x((on,ls)=>{var Jr=as(),Zr=ie(),Qr="Expected a function";function ei(t,e,s){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Qr);return Zr(s)&&(r="leading"in s?!!s.leading:r,i="trailing"in s?!!s.trailing:i),Jr(t,e,{leading:r,maxWait:e,trailing:i})}ls.exports=ei});var ds=x((an,cs)=>{cs.exports=function(){var e={},s=e._fns={};e.emit=function(o,a,l,u,d,c,f){var p=r(o);p.length&&i(o,p,[a,l,u,d,c,f])},e.on=function(o,a){s[o]||(s[o]=[]),s[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var u=this._fns[o],d=0,c=u?u.length:0;for(d;d<c;d++)u[d]!==a&&l.push(u[d])}l.length?this._fns[o]=l:delete this._fns[o]};function r(n){var o=s[n]?s[n]:[],a=n.indexOf(":"),l=a===-1?[n]:[n.substring(0,a),n.substring(a+1)],u=Object.keys(s),d=0,c=u.length;for(d;d<c;d++){var f=u[d];if(f==="*"&&(o=o.concat(s[f])),l.length===2&&l[0]===f){o=o.concat(s[f]);break}}return o}function i(n,o,a){var l=0,u=o.length;for(l;l<u&&o[l];l++)o[l].event=n,o[l].apply(o[l],a)}return e}});var ms=x((pn,_s)=>{"use strict";_s.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let s=e<0,r=Math.abs(e);if(s&&(r=-r),r===0)return"0 B";let i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.min(Math.floor(Math.log(r)/Math.log(1024)),i.length-1),o=Number(r/1024**n),a=i[n];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var vs=x((fn,ys)=>{"use strict";function gs(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}gs.prototype.match=function(t){var e=!0,s=this.parts,r,i=s.length,n;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(n=(t||"").split(this.separator),r=0;e&&r<i;r++)s[r]!=="*"&&(r<n.length?e=s[r]===n[r]:e=!1);e=e&&n}else if(typeof t.splice=="function")for(e=[],r=t.length;r--;)this.match(t[r])&&(e[e.length]=t[r]);else if(typeof t=="object"){e={};for(var o in t)this.match(o)&&(e[o]=t[o])}return e};ys.exports=function(t,e,s){var r=new gs(t,s||/[\/\.]/);return typeof e<"u"?r.match(e):r}});var Ss=x((hn,bs)=>{var ri=vs(),ii=/[\/\+\.]/;bs.exports=function(t,e){function s(r){var i=ri(r,t,ii);return i&&i.length>=2}return e?s(e.split(";")[0]):s}});function Ps(t,e,s){let r=[];return t.forEach(i=>typeof i!="string"?r.push(i):e[Symbol.split](i).forEach((n,o,a)=>{n!==""&&r.push(n),o<a.length-1&&r.push(s)})),r}function Ae(t,e){let s=/\$/g,r="$$$$",i=[t];if(e==null)return i;for(let n of Object.keys(e))if(n!=="_"){let o=e[n];typeof o=="string"&&(o=s[Symbol.replace](o,r)),i=Ps(i,new RegExp(`%\\{${n}\\}`,"g"),o)}return i}var Us=t=>{throw new Error(`missing string: ${t}`)},M=class{locale;constructor(e,{onMissingKey:s=Us}={}){this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(this.#t,this):this.#t(e),this.#e=s}#e;#t(e){if(!e?.strings)return;let s=this.locale;Object.assign(this.locale,{strings:{...s.strings,...e.strings},pluralize:e.pluralize||s.pluralize})}translate(e,s){return this.translateArray(e,s).join("")}translateArray(e,s){let r=this.locale.strings[e];if(r==null&&(this.#e(e),r=e),typeof r=="object"){if(s&&typeof s.smart_count<"u"){let n=this.locale.pluralize(s.smart_count);return Ae(r[n],s)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof r!="string")throw new Error("string was not a string");return Ae(r,s)}};var I=class{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,s){this.uppy=e,this.opts=s??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:s}=this.uppy.getState();this.uppy.setState({plugins:{...s,[this.id]:{...s[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new M([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function le(t){return t<10?`0${t}`:t.toString()}function L(){let t=new Date,e=le(t.getHours()),s=le(t.getMinutes()),r=le(t.getSeconds());return`${e}:${s}:${r}`}var Re={debug:()=>{},warn:()=>{},error:(...t)=>console.error(`[Uppy] [${L()}]`,...t)},ue={debug:(...t)=>console.debug(`[Uppy] [${L()}]`,...t),warn:(...t)=>console.warn(`[Uppy] [${L()}]`,...t),error:(...t)=>console.error(`[Uppy] [${L()}]`,...t)};function ce(t){return typeof t!="object"||t===null||!("nodeType"in t)?!1:t.nodeType===Node.ELEMENT_NODE}function Cs(t,e=document){return typeof t=="string"?e.querySelector(t):ce(t)?t:null}var Me=Cs;function ks(t){for(;t&&!t.dir;)t=t.parentNode;return t?.dir}var je=ks;var B,h,qe,Os,j,$e,He,Be,We,he,de,pe,Ns,H={},De=[],As=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,W=Array.isArray;function k(t,e){for(var s in e)t[s]=e[s];return t}function _e(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function D(t,e,s){var r,i,n,o={};for(n in e)n=="key"?r=e[n]:n=="ref"?i=e[n]:o[n]=e[n];if(arguments.length>2&&(o.children=arguments.length>3?B.call(arguments,2):s),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)o[n]===void 0&&(o[n]=t.defaultProps[n]);return q(t,o,r,i,null)}function q(t,e,s,r,i){var n={type:t,props:e,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++qe,__i:-1,__u:0};return i==null&&h.vnode!=null&&h.vnode(n),n}function Ve(){return{current:null}}function R(t){return t.children}function T(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__i+1):null;for(var s;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?z(t):null}function Ge(t){var e,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return Ge(t)}}function Ie(t){(!t.__d&&(t.__d=!0)&&j.push(t)&&!te.__r++||$e!=h.debounceRendering)&&(($e=h.debounceRendering)||He)(te)}function te(){for(var t,e,s,r,i,n,o,a=1;j.length;)j.length>a&&j.sort(Be),t=j.shift(),a=j.length,t.__d&&(s=void 0,r=void 0,i=(r=(e=t).__v).__e,n=[],o=[],e.__P&&((s=k({},r)).__v=r.__v+1,h.vnode&&h.vnode(s),me(e.__P,s,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,n,i??z(r),!!(32&r.__u),o),s.__v=r.__v,s.__.__k[s.__i]=s,Ke(n,s,o),r.__e=r.__=null,s.__e!=i&&Ge(s)));te.__r=0}function Ye(t,e,s,r,i,n,o,a,l,u,d){var c,f,p,_,v,S,m,g=r&&r.__k||De,P=e.length;for(l=Rs(s,e,g,l,P),c=0;c<P;c++)(p=s.__k[c])!=null&&(f=p.__i==-1?H:g[p.__i]||H,p.__i=c,S=me(t,p,f,i,n,o,a,l,u,d),_=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&ge(f.ref,null,p),d.push(p.ref,p.__c||_,p)),v==null&&_!=null&&(v=_),(m=!!(4&p.__u))||f.__k===p.__k?l=Xe(p,l,t,m):typeof p.type=="function"&&S!==void 0?l=S:_&&(l=_.nextSibling),p.__u&=-7);return s.__e=v,l}function Rs(t,e,s,r,i){var n,o,a,l,u,d=s.length,c=d,f=0;for(t.__k=new Array(i),n=0;n<i;n++)(o=e[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=t.__k[n]=q(null,o,null,null,null):W(o)?o=t.__k[n]=q(R,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=t.__k[n]=q(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):t.__k[n]=o,l=n+f,o.__=t,o.__b=t.__b+1,a=null,(u=o.__i=Ms(o,s,l,c))!=-1&&(c--,(a=s[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(i>d?f--:i<d&&f++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,o.__u|=4))):t.__k[n]=null;if(c)for(n=0;n<d;n++)(a=s[n])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=z(a)),Ze(a,a));return r}function Xe(t,e,s,r){var i,n;if(typeof t.type=="function"){for(i=t.__k,n=0;i&&n<i.length;n++)i[n]&&(i[n].__=t,e=Xe(i[n],e,s,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=z(t)),s.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function V(t,e){return e=e||[],t==null||typeof t=="boolean"||(W(t)?t.some(function(s){V(s,e)}):e.push(t)),e}function Ms(t,e,s,r){var i,n,o,a=t.key,l=t.type,u=e[s],d=u!=null&&(2&u.__u)==0;if(u===null&&a==null||d&&a==u.key&&l==u.type)return s;if(r>(d?1:0)){for(i=s-1,n=s+1;i>=0||n<e.length;)if((u=e[o=i>=0?i--:n++])!=null&&(2&u.__u)==0&&a==u.key&&l==u.type)return o}return-1}function Le(t,e,s){e[0]=="-"?t.setProperty(e,s??""):t[e]=s==null?"":typeof s!="number"||As.test(e)?s:s+"px"}function ee(t,e,s,r,i){var n,o;e:if(e=="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)s&&e in s||Le(t.style,e,"");if(s)for(e in s)r&&s[e]==r[e]||Le(t.style,e,s[e])}else if(e[0]=="o"&&e[1]=="n")n=e!=(e=e.replace(We,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=s,s?r?s.u=r.u:(s.u=he,t.addEventListener(e,n?pe:de,n)):t.removeEventListener(e,n?pe:de,n);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&s==1?"":s))}}function ze(t){return function(e){if(this.l){var s=this.l[e.type+t];if(e.t==null)e.t=he++;else if(e.t<s.u)return;return s(h.event?h.event(e):e)}}}function me(t,e,s,r,i,n,o,a,l,u){var d,c,f,p,_,v,S,m,g,P,O,N,y,E,U,A,ae,C=e.type;if(e.constructor!==void 0)return null;128&s.__u&&(l=!!(32&s.__u),n=[a=e.__e=s.__e]),(d=h.__b)&&d(e);e:if(typeof C=="function")try{if(m=e.props,g="prototype"in C&&C.prototype.render,P=(d=C.contextType)&&r[d.__c],O=d?P?P.props.value:d.__:r,s.__c?S=(c=e.__c=s.__c).__=c.__E:(g?e.__c=c=new C(m,O):(e.__c=c=new T(m,O),c.constructor=C,c.render=$s),P&&P.sub(c),c.state||(c.state={}),c.__n=r,f=c.__d=!0,c.__h=[],c._sb=[]),g&&c.__s==null&&(c.__s=c.state),g&&C.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=k({},c.__s)),k(c.__s,C.getDerivedStateFromProps(m,c.__s))),p=c.props,_=c.state,c.__v=e,f)g&&C.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),g&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(g&&C.getDerivedStateFromProps==null&&m!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(m,O),e.__v==s.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(m,c.__s,O)===!1){for(e.__v!=s.__v&&(c.props=m,c.state=c.__s,c.__d=!1),e.__e=s.__e,e.__k=s.__k,e.__k.some(function($){$&&($.__=e)}),N=0;N<c._sb.length;N++)c.__h.push(c._sb[N]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(m,c.__s,O),g&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,_,v)})}if(c.context=O,c.props=m,c.__P=t,c.__e=!1,y=h.__r,E=0,g){for(c.state=c.__s,c.__d=!1,y&&y(e),d=c.render(c.props,c.state,c.context),U=0;U<c._sb.length;U++)c.__h.push(c._sb[U]);c._sb=[]}else do c.__d=!1,y&&y(e),d=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++E<25);c.state=c.__s,c.getChildContext!=null&&(r=k(k({},r),c.getChildContext())),g&&!f&&c.getSnapshotBeforeUpdate!=null&&(v=c.getSnapshotBeforeUpdate(p,_)),A=d,d!=null&&d.type===R&&d.key==null&&(A=Je(d.props.children)),a=Ye(t,W(A)?A:[A],e,s,r,i,n,o,a,l,u),c.base=e.__e,e.__u&=-161,c.__h.length&&o.push(c),S&&(c.__E=c.__=null)}catch($){if(e.__v=null,l||n!=null)if($.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;n[n.indexOf(a)]=null,e.__e=a}else{for(ae=n.length;ae--;)_e(n[ae]);fe(e)}else e.__e=s.__e,e.__k=s.__k,$.then||fe(e);h.__e($,e,s)}else n==null&&e.__v==s.__v?(e.__k=s.__k,e.__e=s.__e):a=e.__e=js(s.__e,e,s,r,i,n,o,l,u);return(d=h.diffed)&&d(e),128&e.__u?void 0:a}function fe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(fe)}function Ke(t,e,s){for(var r=0;r<s.length;r++)ge(s[r],s[++r],s[++r]);h.__c&&h.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(n){n.call(i)})}catch(n){h.__e(n,i.__v)}})}function Je(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:W(t)?t.map(Je):k({},t)}function js(t,e,s,r,i,n,o,a,l){var u,d,c,f,p,_,v,S=s.props||H,m=e.props,g=e.type;if(g=="svg"?i="http://www.w3.org/2000/svg":g=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),n!=null){for(u=0;u<n.length;u++)if((p=n[u])&&"setAttribute"in p==!!g&&(g?p.localName==g:p.nodeType==3)){t=p,n[u]=null;break}}if(t==null){if(g==null)return document.createTextNode(m);t=document.createElementNS(i,g,m.is&&m),a&&(h.__m&&h.__m(e,n),a=!1),n=null}if(g==null)S===m||a&&t.data==m||(t.data=m);else{if(n=n&&B.call(t.childNodes),!a&&n!=null)for(S={},u=0;u<t.attributes.length;u++)S[(p=t.attributes[u]).name]=p.value;for(u in S)if(p=S[u],u!="children"){if(u=="dangerouslySetInnerHTML")c=p;else if(!(u in m)){if(u=="value"&&"defaultValue"in m||u=="checked"&&"defaultChecked"in m)continue;ee(t,u,null,p,i)}}for(u in m)p=m[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?_=p:u=="checked"?v=p:a&&typeof p!="function"||S[u]===p||ee(t,u,p,S[u],i);if(d)a||c&&(d.__html==c.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(c&&(t.innerHTML=""),Ye(e.type=="template"?t.content:t,W(f)?f:[f],e,s,r,g=="foreignObject"?"http://www.w3.org/1999/xhtml":i,n,o,n?n[0]:s.__k&&z(s,0),a,l),n!=null)for(u=n.length;u--;)_e(n[u]);a||(u="value",g=="progress"&&_==null?t.removeAttribute("value"):_!=null&&(_!==t[u]||g=="progress"&&!_||g=="option"&&_!=S[u])&&ee(t,u,_,S[u],i),u="checked",v!=null&&v!=t[u]&&ee(t,u,v,S[u],i))}return t}function ge(t,e,s){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){h.__e(i,s)}}function Ze(t,e,s){var r,i;if(h.unmount&&h.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ge(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(n){h.__e(n,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Ze(r[i],e,s||typeof t.type!="function");s||_e(t.__e),t.__c=t.__=t.__e=void 0}function $s(t,e,s){return this.constructor(t,s)}function Qe(t,e,s){var r,i,n,o;e==document&&(e=document.documentElement),h.__&&h.__(t,e),i=(r=typeof s=="function")?null:s&&s.__k||e.__k,n=[],o=[],me(e,t=(!r&&s||e).__k=D(R,null,[t]),i||H,H,e.namespaceURI,!r&&s?[s]:i?null:e.firstChild?B.call(e.childNodes):null,n,!r&&s?s:i?i.__e:e.firstChild,r,o),Ke(n,t,o)}function Is(t,e,s){var r,i,n,o,a=k({},t.props);for(n in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)n=="key"?r=e[n]:n=="ref"?i=e[n]:a[n]=e[n]===void 0&&o!=null?o[n]:e[n];return arguments.length>2&&(a.children=arguments.length>3?B.call(arguments,2):s),q(t.type,a,r||t.key,i||t.ref,null)}B=De.slice,h={__e:function(t,e,s,r){for(var i,n,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((n=i.constructor)&&n.getDerivedStateFromError!=null&&(i.setState(n.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},qe=0,Os=function(t){return t!=null&&t.constructor===void 0},T.prototype.setState=function(t,e){var s;s=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=k({},this.state),typeof t=="function"&&(t=t(k({},s),this.props)),t&&k(s,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ie(this))},T.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ie(this))},T.prototype.render=R,j=[],He=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Be=function(t,e){return t.__v.__b-e.__v.__b},te.__r=0,We=/(PointerCapture)$|Capture$/i,he=0,de=ze(!1),pe=ze(!0),Ns=0;var G,b,ye,et,Y=0,lt=[],w=h,tt=w.__b,st=w.__r,rt=w.diffed,it=w.__c,nt=w.unmount,ot=w.__;function be(t,e){w.__h&&w.__h(b,t,Y||e),Y=0;var s=b.__H||(b.__H={__:[],__h:[]});return t>=s.__.length&&s.__.push({}),s.__[t]}function Ls(t){return Y=1,ut(dt,t)}function ut(t,e,s){var r=be(G++,2);if(r.t=t,!r.__c&&(r.__=[s?s(e):dt(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,a);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=b,!b.__f)){var i=function(a,l,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!n||n.call(this,a,l,u);var c=r.__c.props!==a;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(c=!0)}}),n&&n.call(this,a,l,u)||c};b.__f=!0;var n=b.shouldComponentUpdate,o=b.componentWillUpdate;b.componentWillUpdate=function(a,l,u){if(this.__e){var d=n;n=void 0,i(a,l,u),n=d}o&&o.call(this,a,l,u)},b.shouldComponentUpdate=i}return r.__N||r.__}function zs(t,e){var s=be(G++,3);!w.__s&&ct(s.__H,e)&&(s.__=t,s.u=e,b.__H.__h.push(s))}function qs(t){return Y=5,Se(function(){return{current:t}},[])}function Se(t,e){var s=be(G++,7);return ct(s.__H,e)&&(s.__=t(),s.__H=e,s.__h=t),s.__}function Hs(t,e){return Y=8,Se(function(){return t},e)}function Bs(){for(var t;t=lt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(se),t.__H.__h.forEach(ve),t.__H.__h=[]}catch(e){t.__H.__h=[],w.__e(e,t.__v)}}w.__b=function(t){b=null,tt&&tt(t)},w.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),ot&&ot(t,e)},w.__r=function(t){st&&st(t),G=0;var e=(b=t.__c).__H;e&&(ye===b?(e.__h=[],b.__h=[],e.__.forEach(function(s){s.__N&&(s.__=s.__N),s.u=s.__N=void 0})):(e.__h.forEach(se),e.__h.forEach(ve),e.__h=[],G=0)),ye=b},w.diffed=function(t){rt&&rt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(lt.push(e)!==1&&et===w.requestAnimationFrame||((et=w.requestAnimationFrame)||Ws)(Bs)),e.__H.__.forEach(function(s){s.u&&(s.__H=s.u),s.u=void 0})),ye=b=null},w.__c=function(t,e){e.some(function(s){try{s.__h.forEach(se),s.__h=s.__h.filter(function(r){return!r.__||ve(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],w.__e(r,s.__v)}}),it&&it(t,e)},w.unmount=function(t){nt&&nt(t);var e,s=t.__c;s&&s.__H&&(s.__H.__.forEach(function(r){try{se(r)}catch(i){e=i}}),s.__H=void 0,e&&w.__e(e,s.__v))};var at=typeof requestAnimationFrame=="function";function Ws(t){var e,s=function(){clearTimeout(r),at&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(s,35);at&&(e=requestAnimationFrame(s))}function se(t){var e=b,s=t.__c;typeof s=="function"&&(t.__c=void 0,s()),b=e}function ve(t){var e=b;t.__c=t.__(),b=e}function ct(t,e){return!t||t.length!==e.length||e.some(function(s,r){return s!==t[r]})}function dt(t,e){return typeof e=="function"?e(t):e}function Vs(t,e){for(var s in e)t[s]=e[s];return t}function pt(t,e){for(var s in t)if(s!=="__source"&&!(s in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function ft(t,e){this.props=t,this.context=e}(ft.prototype=new T).isPureReactComponent=!0,ft.prototype.shouldComponentUpdate=function(t,e){return pt(this.props,t)||pt(this.state,e)};var ht=h.__b;h.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),ht&&ht(t)};var Ti=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var Gs=h.__e;h.__e=function(t,e,s,r){if(t.then){for(var i,n=e;n=n.__;)if((i=n.__c)&&i.__c)return e.__e==null&&(e.__e=s.__e,e.__k=s.__k),i.__c(t,e)}Gs(t,e,s,r)};var _t=h.unmount;function St(t,e,s){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=Vs({},t)).__c!=null&&(t.__c.__P===s&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return St(r,e,s)})),t}function wt(t,e,s){return t&&s&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return wt(r,e,s)}),t.__c&&t.__c.__P===e&&(t.__e&&s.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=s)),t}function we(){this.__u=0,this.o=null,this.__b=null}function xt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function re(){this.i=null,this.l=null}h.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),_t&&_t(t)},(we.prototype=new T).__c=function(t,e){var s=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(s);var i=xt(r.__v),n=!1,o=function(){n||(n=!0,s.__R=null,i?i(a):a())};s.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=wt(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},we.prototype.componentWillUnmount=function(){this.o=[]},we.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=St(this.__b,s,r.__O=r.__P)}this.__b=null}var i=e.__a&&D(R,null,t.fallback);return i&&(i.__u&=-33),[D(R,null,e.__a?null:t.children),i]};var mt=function(t,e,s){if(++s[1]===s[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(s=t.i;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;t.i=s=s[2]}};(re.prototype=new T).__a=function(t){var e=this,s=xt(e.__v),r=e.l.get(t);return r[0]++,function(i){var n=function(){e.props.revealOrder?(r.push(i),mt(e,t,r)):i()};s?s(n):n()}},re.prototype.render=function(t){this.i=null,this.l=new Map;var e=V(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var s=e.length;s--;)this.l.set(e[s],this.i=[1,0,this.i]);return t.children},re.prototype.componentDidUpdate=re.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,s){mt(t,s,e)})};var Ys=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Xs=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ks=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Js=/[A-Z0-9]/g,Zs=typeof document<"u",Qs=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function xe(t,e,s){return e.__k==null&&(e.textContent=""),Qe(t,e),typeof s=="function"&&s(),t?t.__c:null}T.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(T.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var gt=h.event;function er(){}function tr(){return this.cancelBubble}function sr(){return this.defaultPrevented}h.event=function(t){return gt&&(t=gt(t)),t.persist=er,t.isPropagationStopped=tr,t.isDefaultPrevented=sr,t.nativeEvent=t};var Ft,rr={enumerable:!1,configurable:!0,get:function(){return this.class}},yt=h.vnode;h.vnode=function(t){typeof t.type=="string"&&(function(e){var s=e.props,r=e.type,i={},n=r.indexOf("-")===-1;for(var o in s){var a=s[o];if(!(o==="value"&&"defaultValue"in s&&a==null||Zs&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in s&&s.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||Qs(s.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":Ks.test(o)&&(o=l):l=o="oninput":n&&Xs.test(o)?o=o.replace(Js,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&i[o=l]&&(o="oninputCapture"),i[o]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=V(s.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=V(s.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),s.class&&!s.className?(i.class=s.class,Object.defineProperty(i,"className",rr)):(s.className&&!s.class||s.class&&s.className)&&(i.class=i.className=s.className),e.props=i})(t),t.$$typeof=Ys,yt&&yt(t)};var vt=h.__r;h.__r=function(t){vt&&vt(t),Ft=t.__c};var bt=h.diffed;h.diffed=function(t){bt&&bt(t);var e=t.props,s=t.__e;s!=null&&t.type==="textarea"&&"value"in e&&e.value!==s.value&&(s.value=e.value==null?"":e.value),Ft=null};function ir(t){let e=null,s;return(...r)=>(s=r,e||(e=Promise.resolve().then(()=>(e=null,t(...s)))),e)}var Fe=class t extends I{#e;isTargetDOMEl;el;parent;title;getTargetPlugin(e){let s;if(typeof e?.addTarget=="function")s=e,s instanceof t||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:s,UIPlugin:t}}));else if(typeof e=="function"){let r=e;this.uppy.iteratePlugins(i=>{i instanceof r&&(s=i)})}return s}mount(e,s){let r=s.id,i=Me(e);if(i){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),this.#e=ir(l=>{this.uppy.getPlugin(this.id)&&(xe(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${r} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),xe(this.render(this.uppy.getState(),a),a),this.el=a,i.appendChild(a),a.dir=this.opts.direction||je(a)||"ltr",this.onMount(),this.el}let n=this.getTargetPlugin(e);if(n)return this.uppy.log(`Installing ${r} to ${n.id}`),this.parent=n,this.el=n.addTarget(s),this.onMount(),this.el;this.uppy.log(`Not installing ${r}`);let o=`Invalid target option given to ${r}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,s){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){this.el!=null&&this.#e?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}},nr=Fe;var Et={name:"@uppy/store-default",description:"The default simple object-based store for Uppy.",version:"4.3.2",license:"MIT",main:"lib/index.js",type:"module",scripts:{build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-store"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},devDependencies:{jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"]};var Ee=class{static VERSION=Et.version;state={};#e=new Set;getState(){return this.state}setState(e){let s={...this.state},r={...this.state,...e};this.state=r,this.#t(s,r,e)}subscribe(e){return this.#e.add(e),()=>{this.#e.delete(e)}}#t(...e){this.#e.forEach(s=>{s(...e)})}},Tt=Ee;function X(t){let e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}var Te={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function K(t){if(t.type)return t.type;let e=t.name?X(t.name).extension?.toLowerCase():null;return e&&e in Te?Te[e]:"application/octet-stream"}function ar(t){return t.charCodeAt(0).toString(32)}function Pt(t){let e="";return t.replace(/[^A-Z0-9]/gi,s=>(e+=`-${ar(s)}`,"/"))+e}function Ut(t,e){let s=e||"uppy";return typeof t.name=="string"&&(s+=`-${Pt(t.name.toLowerCase())}`),t.type!==void 0&&(s+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(s+=`-${Pt(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(s+=`-${t.data.size}`),t.data.lastModified!==void 0&&(s+=`-${t.data.lastModified}`),s}function lr(t){return!t.isRemote||!t.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(t.remote.provider)}function Ct(t,e){if(lr(t))return t.id;let s=K(t);return Ut({...t,type:s},e)}var Fs=Q(us(),1),Es=Q(ds(),1);var ti="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var ps=(t=21)=>{let e="",s=t|0;for(;s--;)e+=ti[Math.random()*64|0];return e};var fs={name:"@uppy/core",description:"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",version:"4.5.3",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",sideEffects:["*.css"],scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-plugin"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^4.3.2","@uppy/utils":"^6.2.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},devDependencies:{"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"}};function ke(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}var hs={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var Z=Q(ms(),1),ws=Q(Ss(),1),xs={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},F=class extends Error{isUserFacing;file;constructor(e,s){super(e),this.isUserFacing=s?.isUserFacing??!0,s?.file&&(this.file=s.file)}isRestriction=!0},ne=class{getI18n;getOpts;constructor(e,s){this.getI18n=s,this.getOpts=()=>{let r=e();if(r.restrictions?.allowedFileTypes!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,s){let{maxTotalFileSize:r,maxNumberOfFiles:i}=this.getOpts().restrictions;if(i&&e.filter(o=>!o.isGhost).length+s.length>i)throw new F(`${this.getI18n()("youCanOnlyUploadX",{smart_count:i})}`);if(r){let n=[...e,...s].reduce((o,a)=>o+(a.size??0),0);if(n>r)throw new F(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,Z.default)(r),size:(0,Z.default)(n)}))}}validateSingleFile(e){let{maxFileSize:s,minFileSize:r,allowedFileTypes:i}=this.getOpts().restrictions;if(i&&!i.some(o=>o.includes("/")?e.type?(0,ws.default)(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){let o=i.join(", ");throw new F(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(s&&e.size!=null&&e.size>s)throw new F(this.getI18n()("exceedsSize",{size:(0,Z.default)(s),file:e.name??this.getI18n()("unnamed")}),{file:e});if(r&&e.size!=null&&e.size<r)throw new F(this.getI18n()("inferiorSize",{size:(0,Z.default)(r)}),{file:e})}validate(e,s){s.forEach(r=>{this.validateSingleFile(r)}),this.validateAggregateRestrictions(e,s)}validateMinNumberOfFiles(e){let{minNumberOfFiles:s}=this.getOpts().restrictions;if(s&&Object.keys(e).length<s)throw new F(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:s}))}getMissingRequiredMetaFields(e){let s=new F(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,i=[];for(let n of r)(!Object.hasOwn(e.meta,n)||e.meta[n]==="")&&i.push(n);return{missingFields:i,error:s}}};function Oe(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;let e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;let r=e[1].split(".",2),i=parseInt(r[0],10),n=parseInt(r[1],10);return i<15||i===15&&n<15063||i>18||i===18&&n>=18218}var oe={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Ne=class t{static VERSION=fs.version;#e=Object.create(null);#t;#p;#i=(0,Es.default)();#u=new Set;#c=new Set;#n=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(e){this.defaultLocale=hs;let s={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:xs,meta:{},onBeforeFileAdded:(i,n)=>!Object.hasOwn(n,i.id),onBeforeUpload:i=>i,store:new Tt,logger:Re,infoTimeout:5e3},r={...s,...e};this.opts={...r,restrictions:{...s.restrictions,...e?.restrictions}},e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=ue),this.log(`Using Core v${t.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...oe,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Oe(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#t=new ne(()=>this.opts,()=>this.i18n),this.#p=this.store.subscribe((i,n,o)=>{this.emit("state-update",i,n,o),this.updateAll(n)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#E()}emit(e,...s){this.#i.emit(e,...s)}on(e,s){return this.#i.on(e,s),this}once(e,s){return this.#i.once(e,s),this}off(e,s){return this.#i.off(e,s),this}updateAll(e){this.iteratePlugins(s=>{s.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let s=this.getState().files;this.setState({files:{...s,...Object.fromEntries(Object.entries(e).map(([r,i])=>[r,{...s[r],...i}]))}})}setFileState(e,s){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:s})}i18nInit(){let e=r=>this.log(`Missing i18n string: ${r}`,"error"),s=new M([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=s.translate.bind(s),this.i18nArray=s.translateArray.bind(s),this.locale=s.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(s=>{s.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},s={...this.getState().files},r=Object.create(null);Object.keys(s).forEach(i=>{r[i]={...s[i],progress:{...s[i].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:r,...oe})}clear(){let{capabilities:e,currentUploads:s}=this.getState();if(Object.keys(s).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...oe,files:{}})}addPreProcessor(e){this.#u.add(e)}removePreProcessor(e){return this.#u.delete(e)}addPostProcessor(e){this.#n.add(e)}removePostProcessor(e){return this.#n.delete(e)}addUploader(e){this.#c.add(e)}removeUploader(e){return this.#c.delete(e)}setMeta(e){let s={...this.getState().meta,...e},r={...this.getState().files};Object.keys(r).forEach(i=>{r[i]={...r[i],meta:{...r[i].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:s,files:r})}setFileMeta(e,s){let r={...this.getState().files};if(!r[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let i={...r[e].meta,...s};r[e]={...r[e],meta:i},this.setState({files:r})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(s=>this.getFile(s))}getObjectOfFilesPerState(){let{files:e,totalProgress:s,error:r}=this.getState(),i=Object.values(e),n=[],o=[],a=[],l=[],u=[],d=[],c=[],f=[],p=[];for(let _ of i){let{progress:v}=_;!v.uploadComplete&&v.uploadStarted&&(n.push(_),_.isPaused||f.push(_)),v.uploadStarted||o.push(_),(v.uploadStarted||v.preprocess||v.postprocess)&&a.push(_),v.uploadStarted&&l.push(_),_.isPaused&&u.push(_),v.uploadComplete&&d.push(_),_.error&&c.push(_),(v.preprocess||v.postprocess)&&p.push(_)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:d,erroredFiles:c,inProgressFiles:n,inProgressNotPausedFiles:f,processingFiles:p,isUploadStarted:l.length>0,isAllComplete:s===100&&d.length===i.length&&p.length===0,isAllErrored:!!r&&c.length===i.length,isAllPaused:n.length!==0&&u.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:i.some(_=>_.isGhost)}}#s(e){for(let o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");let s=e.filter(o=>o.isUserFacing),r=4,i=s.slice(0,r),n=s.slice(r);i.forEach(({message:o,details:a=""})=>{this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}validateRestrictions(e,s=this.getFiles()){try{this.#t.validate(s,[e])}catch(r){return r}return null}validateSingleFile(e){try{this.#t.validateSingleFile(e)}catch(s){return s.message}return null}validateAggregateRestrictions(e){let s=this.getFiles();try{this.#t.validateAggregateRestrictions(s,e)}catch(r){return r.message}return null}#f(e){let{missingFields:s,error:r}=this.#t.getMissingRequiredMetaFields(e);return s.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:s,error:r.message}),this.log(r.message),this.emit("restriction-failed",e,r),!1):(s.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#S(e){let s=!0;for(let r of Object.values(e))this.#f(r)||(s=!1);return s}#h(e){let{allowNewUpload:s}=this.getState();if(s===!1){let r=new F(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#s([r]),r}}checkIfFileAlreadyExists(e){let{files:s}=this.getState();return!!(s[e]&&!s[e].isGhost)}#w(e){let s=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,r=K(s),i=ke(r,s),n=X(i).extension,o=Ct(s,this.getID()),a=s.meta||{};a.name=i,a.type=r;let l=Number.isFinite(s.data.size)?s.data.size:null;return{source:s.source||"",id:o,name:i,extension:n||"",meta:{...this.getState().meta,...a},type:r,data:s.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:s.isRemote||!1,remote:s.remote,preview:s.preview}}#_(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#m(e){let{files:s}=this.getState(),r={...s},i=[],n=[];for(let o of e)try{let a=this.#w(o),l=s[a.id]?.isGhost;l&&(a={...s[a.id],isGhost:!1,data:o.data},this.log(`Replaced the blob in the restored ghost file: ${a.name}, ${a.id}`));let u=this.opts.onBeforeFileAdded(a,r);if(s=this.getState().files,r={...s,...r},!u&&this.checkIfFileAlreadyExists(a.id))throw new F(this.i18n("noDuplicates",{fileName:a.name??this.i18n("unnamed")}),{file:o});if(u===!1&&!l)throw new F("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof u=="object"&&u!==null&&(a=u),this.#t.validateSingleFile(a),r[a.id]=a,i.push(a)}catch(a){n.push(a)}try{this.#t.validateAggregateRestrictions(Object.values(s),i)}catch(o){return n.push(o),{nextFilesState:s,validFilesToAdd:[],errors:n}}return{nextFilesState:r,validFilesToAdd:i,errors:n}}addFile(e){this.#h(e);let{nextFilesState:s,validFilesToAdd:r,errors:i}=this.#m([e]),n=i.filter(a=>a.isRestriction);if(this.#s(n),i.length>0)throw i[0];this.setState({files:s});let[o]=r;return this.emit("file-added",o),this.emit("files-added",r),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),this.#_(),o.id}addFiles(e){this.#h();let{nextFilesState:s,validFilesToAdd:r,errors:i}=this.#m(e),n=i.filter(a=>a.isRestriction);this.#s(n);let o=i.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:s}),r.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",r),r.length>5?this.log(`Added batch of ${r.length} files`):Object.values(r).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),r.length>0&&this.#_()}removeFiles(e){let{files:s,currentUploads:r}=this.getState(),i={...s},n={...r},o=Object.create(null);e.forEach(d=>{s[d]&&(o[d]=s[d],delete i[d])});function a(d){return o[d]===void 0}Object.keys(n).forEach(d=>{let c=r[d].fileIDs.filter(a);if(c.length===0){delete n[d];return}let{capabilities:f}=this.getState();if(c.length!==r[d].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");n[d]={...r[d],fileIDs:c}});let l={currentUploads:n,files:i};Object.keys(i).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.#o();let u=Object.keys(o);u.forEach(d=>{this.emit("file-removed",o[d])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let s=this.getFile(e),i=!(s.isPaused||!1);return this.setFileState(e,{isPaused:i}),this.emit("upload-pause",s,i),i}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{let i={...e[r],isPaused:!0};e[r]=i}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{let i={...e[r],isPaused:!1,error:null};e[r]=i}),this.setState({files:e}),this.emit("resume-all")}#g(){let{files:e}=this.getState();return Object.keys(e).filter(s=>{let r=e[s];return r.error&&(!r.missingRequiredMetaFields||r.missingRequiredMetaFields.length===0)})}async#y(){let e=this.#g(),s={...this.getState().files};if(e.forEach(i=>{s[i]={...s[i],isPaused:!1,error:null}}),this.setState({files:s,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};let r=this.#a(e,{forceAllowNewUpload:!0});return this.#l(r)}async retryAll(){let e=await this.#y();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),s=Object.keys(e);s.length&&this.removeFiles(s),this.setState(oe)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let s=this.#a([e],{forceAllowNewUpload:!0});return this.#l(s)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#x=(e,s)=>{let r=e?this.getFile(e.id):void 0;if(e==null||!r){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(r.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}let i={bytesTotal:s.bytesTotal,percentage:s.bytesTotal!=null&&Number.isFinite(s.bytesTotal)&&s.bytesTotal>0?Math.round(s.bytesUploaded/s.bytesTotal*100):void 0};r.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...r.progress,...i,bytesUploaded:s.bytesUploaded}}):this.setFileState(e.id,{progress:{...r.progress,...i}}),this.#o()};#v(){let e=this.#F(),s=null;e!=null&&(s=Math.round(e*100),s>100?s=100:s<0&&(s=0)),this.emit("progress",s??0),this.setState({totalProgress:s??0})}#o=(0,Fs.default)(()=>this.#v(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#v()}#F(){let s=this.getFiles().filter(l=>l.progress.uploadStarted||l.progress.preprocess||l.progress.postprocess);if(s.length===0)return 0;if(s.every(l=>l.progress.uploadComplete))return 1;let r=l=>l.progress.bytesTotal!=null&&l.progress.bytesTotal!==0,i=s.filter(r),n=s.filter(l=>!r(l));if(i.every(l=>l.progress.uploadComplete)&&n.length>0&&!n.every(l=>l.progress.uploadComplete))return null;let o=i.reduce((l,u)=>l+(u.progress.bytesTotal??0),0),a=i.reduce((l,u)=>l+(u.progress.bytesUploaded||0),0);return o===0?0:a/o}#E(){let e=(i,n,o)=>{let a=i.message||"Unknown error";i.details&&(a+=` ${i.details}`),this.setState({error:a}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:a,response:o})};this.on("error",e),this.on("upload-error",(i,n,o)=>{if(e(n,i,o),typeof n=="object"&&n.message){this.log(n.message,"error");let a=new Error(this.i18n("failedToUpload",{file:i?.name??""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),this.#s([a])}else this.#s([n])});let s=null;this.on("upload-stalled",(i,n)=>{let{message:o}=i,a=n.map(l=>l.meta.name).join(", ");s||(this.info({message:o,details:a},"warning",this.opts.infoTimeout),s=setTimeout(()=>{s=null},this.opts.infoTimeout)),this.log(`${o} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let r=i=>{let n=i.filter(a=>{let l=a!=null&&this.getFile(a.id);return l||this.log(`Not setting progress for a file that has been removed: ${a?.id}`),l}),o=Object.fromEntries(n.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(o)};this.on("upload-start",r),this.on("upload-progress",this.#x),this.on("upload-success",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let o=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...o,postprocess:this.#n.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:n.bytesUploaded||o.bytesTotal}),this.#o()}),this.on("preprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:n}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:n}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{this.#o()}),this.on("dashboard:file-edit-complete",i=>{i&&this.#f(i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#r),window.addEventListener("offline",this.#r),setTimeout(this.#r,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#r=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...s){if(typeof e!="function"){let o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}let r=new e(this,...s),i=r.id;if(!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");let n=this.getPlugin(i);if(n){let o=`Already found a plugin named '${n.id}'. Tried to use: '${i}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),r.type in this.#e?this.#e[r.type].push(r):this.#e[r.type]=[r],r.install(),this.emit("plugin-added",r),this}getPlugin(e){for(let s of Object.values(this.#e)){let r=s.find(i=>i.id===e);if(r!=null)return r}}[Symbol.for("uppy test: getPlugins")](e){return this.#e[e]}iteratePlugins(e){Object.values(this.#e).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let s=this.#e[e.type],r=s.findIndex(o=>o.id===e.id);r!==-1&&s.splice(r,1);let n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#p(),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#r),window.removeEventListener("offline",this.#r))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,s="info",r=3e3){let i=typeof e=="object";this.setState({info:[...this.getState().info,{type:s,message:i?e.message:e,details:i?e.details:null}]}),setTimeout(()=>this.hideInfo(),r),this.emit("info-visible")}log(e,s){let{logger:r}=this.opts;switch(s){case"error":r.error(e);break;case"warning":r.warn(e);break;default:r.debug(e);break}}#b=new Map;registerRequestClient(e,s){this.#b.set(e,s)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let s=this.#b.get(e.remote.requestClientId);if(s==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return s}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?this.#l(e):(this.#d(e),Promise.reject(new Error("Nonexistent upload")))}#a(e,s={}){let{forceAllowNewUpload:r=!1}=s,{allowNewUpload:i,currentUploads:n}=this.getState();if(!i&&!r)throw new Error("Cannot create a new upload: already uploading.");let o=ps();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[o]:{fileIDs:e,step:0,result:{}}}}),o}[Symbol.for("uppy test: createUpload")](...e){return this.#a(...e)}#T(e){let{currentUploads:s}=this.getState();return s[e]}addResultData(e,s){if(!this.#T(e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:r}=this.getState(),i={...r[e],result:{...r[e].result,...s}};this.setState({currentUploads:{...r,[e]:i}})}#d(e){let s={...this.getState().currentUploads};delete s[e],this.setState({currentUploads:s})}async#l(e){let s=()=>{let{currentUploads:o}=this.getState();return o[e]},r=s(),i=[...this.#u,...this.#c,...this.#n];try{for(let o=r.step||0;o<i.length&&r;o++){let a=i[o];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...r,step:o}}});let{fileIDs:l}=r;await a(l,e),r=s()}}catch(o){throw this.#d(e),o}if(r){r.fileIDs.forEach(u=>{let d=this.getFile(u);d?.progress.postprocess&&this.emit("postprocess-complete",d)});let o=r.fileIDs.map(u=>this.getFile(u)),a=o.filter(u=>!u.error),l=o.filter(u=>u.error);this.addResultData(e,{successful:a,failed:l,uploadID:e}),r=s()}let n;return r&&(n=r.result,this.#d(e)),n==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),n={successful:[],failed:[],uploadID:e}),n}async upload(){this.#e.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#g().length>0){let i=await this.#y();if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:e}=this.getState())}let r=this.opts.onBeforeUpload(e);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(e=r,this.setState({files:e})),Promise.resolve().then(()=>this.#t.validateMinNumberOfFiles(e)).catch(i=>{throw this.#s([i]),i}).then(()=>{if(!this.#S(e))throw new F(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{let{currentUploads:i}=this.getState(),n=Object.values(i).flatMap(u=>u.fileIDs),o=[];Object.keys(e).forEach(u=>{let d=this.getFile(u);!d.progress.uploadStarted&&n.indexOf(u)===-1&&o.push(d.id)});let a=this.#a(o),l=await this.#l(a);return this.emit("complete",l),l}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}},Ts=Ne;export{I as a,ue as b,ce as c,je as d,h as e,D as f,Ve as g,R as h,T as i,V as j,Is as k,Ls as l,zs as m,qs as n,Se as o,Hs as p,nr as q,X as r,Te as s,Ct as t,as as u,ps as v,ms as w,Ts as x};
/*! Bundled license information:

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/
//# sourceMappingURL=chunk-RMJY7HHF.js.map
