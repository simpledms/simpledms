import{a as F,b as ve}from "./chunk-FW4363Y4.js";var st=F((as, it)=>{it.exports=function(){var e={},r=e._fns={};e.emit=function(o, a, u, d, p, l, f){var h=i(o);h.length&&s(o,h,[a,u,d,p,l,f])},e.on=function(o, a){r[o]||(r[o]=[]),r[o].push(a)},e.once=function(o, a){function u(){a.apply(this,arguments),e.off(o,u)}this.on(o,u)},e.off=function(o, a){var u=[];if(o&&a){var d=this._fns[o],p=0,l=d?d.length:0;for(p; p<l; p++)d[p]!==a&&u.push(d[p])}u.length?this._fns[o]=u:delete this._fns[o]};function i(n){var o=r[n]?r[n]:[],a=n.indexOf(":"),u=a===-1?[n]:[n.substring(0,a),n.substring(a+1)],d=Object.keys(r),p=0,l=d.length;for(p; p<l; p++){var f=d[p];if(f==="*"&&(o=o.concat(r[f])),u.length===2&&u[0]===f){o=o.concat(r[f]);break}}return o}function s(n, o, a){var u=0,d=o.length;for(u; u<d&&o[u]; u++)o[u].event=n,o[u].apply(o[u],a)}return e}});var be=F((us, ot)=>{function Ur(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}ot.exports=Ur});var lt=F((ds, at)=>{var Er=typeof global=="object"&&global&&global.Object===Object&&global;at.exports=Er});var je=F((cs, ut)=>{var Ar=lt(),jr=typeof self=="object"&&self&&self.Object===Object&&self,Cr=Ar||jr||Function("return this")();ut.exports=Cr});var ct=F((ps, dt)=>{var Mr=je(),$r=function(){return Mr.Date.now()};dt.exports=$r});var ht=F((hs, pt)=>{var kr=/\s/;function Rr(t){for(var e=t.length; e--&&kr.test(t.charAt(e)););return e}pt.exports=Rr});var gt=F((fs, ft)=>{var Nr=ht(),Ir=/^\s+/;function Lr(t){return t&&t.slice(0,Nr(t)+1).replace(Ir,"")}ft.exports=Lr});var Ce=F((gs, mt)=>{var zr=je(),qr=zr.Symbol;mt.exports=qr});var bt=F((ms, yt)=>{var _t=Ce(),vt=Object.prototype,Br=vt.hasOwnProperty,Wr=vt.toString,ee=_t?_t.toStringTag:void 0;function Gr(t){var e=Br.call(t,ee),r=t[ee];try{t[ee]=void 0;var i=!0}catch{}var s=Wr.call(t);return i&&(e?t[ee]=r:delete t[ee]),s}yt.exports=Gr});var St=F((_s, wt)=>{var Hr=Object.prototype,Yr=Hr.toString;function Kr(t){return Yr.call(t)}wt.exports=Kr});var Tt=F((vs, Pt)=>{var Ft=Ce(),Vr=bt(),Xr=St(),Dr="[object Null]",Jr="[object Undefined]",xt=Ft?Ft.toStringTag:void 0;function Zr(t){return t==null?t===void 0?Jr:Dr:xt&&xt in Object(t)?Vr(t):Xr(t)}Pt.exports=Zr});var Ut=F((ys, Ot)=>{function Qr(t){return t!=null&&typeof t=="object"}Ot.exports=Qr});var At=F((bs, Et)=>{var ei=Tt(),ti=Ut(),ri="[object Symbol]";function ii(t){return typeof t=="symbol"||ti(t)&&ei(t)==ri}Et.exports=ii});var $t=F((ws, Mt)=>{var si=gt(),jt=be(),ni=At(),Ct=NaN,oi=/^[-+]0x[0-9a-f]+$/i,ai=/^0b[01]+$/i,li=/^0o[0-7]+$/i,ui=parseInt;function di(t){if(typeof t=="number")return t;if(ni(t))return Ct;if(jt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=si(t);var r=ai.test(t);return r||li.test(t)?ui(t.slice(2),r?2:8):oi.test(t)?Ct:+t}Mt.exports=di});var Nt=F((Ss, Rt)=>{var ci=be(),Me=ct(),kt=$t(),pi="Expected a function",hi=Math.max,fi=Math.min;function gi(t, e, r){var i,s,n,o,a,u,d=0,p=!1,l=!1,f=!0;if(typeof t!="function")throw new TypeError(pi);e=kt(e)||0,ci(r)&&(p=!!r.leading,l="maxWait"in r,n=l?hi(kt(r.maxWait)||0,e):n,f="trailing"in r?!!r.trailing:f);function h(y){var U=i,j=s;return i=s=void 0,d=y,o=t.apply(j,U),o}function g(y){return d=y,a=setTimeout(m,e),p?h(y):o}function b(y){var U=y-u,j=y-d,z=e-U;return l?fi(z,n-j):z}function S(y){var U=y-u,j=y-d;return u===void 0||U>=e||U<0||l&&j>=n}function m(){var y=Me();if(S(y))return _(y);a=setTimeout(m,b(y))}function _(y){return a=void 0,f&&i?h(y):(i=s=void 0,o)}function q(){a!==void 0&&clearTimeout(a),d=0,i=u=s=a=void 0}function A(){return a===void 0?o:_(Me())}function L(){var y=Me(),U=S(y);if(i=arguments,s=this,u=y,U){if(a===void 0)return g(u);if(l)return clearTimeout(a),a=setTimeout(m,e),h(u)}return a===void 0&&(a=setTimeout(m,e)),o}return L.cancel=q,L.flush=A,L}Rt.exports=gi});var Lt=F((Fs, It)=>{var mi=Nt(),_i=be(),vi="Expected a function";function yi(t, e, r){var i=!0,s=!0;if(typeof t!="function")throw new TypeError(vi);return _i(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),mi(t,e,{leading:i,maxWait:e,trailing:s})}It.exports=yi});var Kt=F((Ns, Yt)=>{"use strict";Yt.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let r=e<0,i=Math.abs(e);if(r&&(i=-i),i===0)return"0 B";let s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.min(Math.floor(Math.log(i)/Math.log(1024)),s.length-1),o=Number(i/1024**n),a=s[n];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var Dt=F((Is, Xt)=>{"use strict";function Vt(t, e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}Vt.prototype.match=function(t){var e=!0,r=this.parts,i,s=r.length,n;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(n=(t||"").split(this.separator),i=0; e&&i<s; i++)r[i]!=="*"&&(i<n.length?e=r[i]===n[i]:e=!1);e=e&&n}else if(typeof t.splice=="function")for(e=[],i=t.length; i--;)this.match(t[i])&&(e[e.length]=t[i]);else if(typeof t=="object"){e={};for(var o in t)this.match(o)&&(e[o]=t[o])}return e};Xt.exports=function(t, e, r){var i=new Vt(t,r||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var Zt=F((Ls, Jt)=>{var Pi=Dt(),Ti=/[\/\+\.]/;Jt.exports=function(t, e){function r(i){var s=Pi(i,t,Ti);return s&&s.length>=2}return e?r(e.split(";")[0]):r}});function ye(t, e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Fr=0;function rt(t){return"__private_"+Fr+++"_"+t}function xr(t, e, r){let i=[];return t.forEach(s=>typeof s!="string"?i.push(s):e[Symbol.split](s).forEach((n, o, a)=>{n!==""&&i.push(n),o<a.length-1&&i.push(r)})),i}function tt(t, e){let r=/\$/g,i="$$$$",s=[t];if(e==null)return s;for(let n of Object.keys(e))if(n!=="_"){let o=e[n];typeof o=="string"&&(o=r[Symbol.replace](o,i)),s=xr(s,new RegExp(`%\\{${n}\\}`,"g"),o)}return s}var Pr= t=>{throw new Error(`missing string: ${t}`)},Z=rt("onMissingKey"),Q=rt("apply"),B=class{constructor(e, r){let{onMissingKey:i=Pr}=r===void 0?{}:r;Object.defineProperty(this,Q,{value:Tr}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(s){return s===1?0:1}},Array.isArray(e)?e.forEach(ye(this,Q)[Q],this):ye(this,Q)[Q](e),ye(this,Z)[Z]=i}translate(e, r){return this.translateArray(e,r).join("")}translateArray(e, r){let i=this.locale.strings[e];if(i==null&&(ye(this,Z)[Z](e),i=e),typeof i=="object"){if(r&&typeof r.smart_count<"u"){let n=this.locale.pluralize(r.smart_count);return tt(i[n],r)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return tt(i,r)}};function Tr(t){if(!(t!=null&&t.strings))return;let e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...t.strings},pluralize:t.pluralize||e.pluralize})}var rr=ve(st(),1);var Or="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var nt=(t=21)=>{let e="",r=t|0;for(; r--;)e+=Or[Math.random()*64|0];return e};var ir=ve(Lt(),1);function we(t, e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var bi=0;function zt(t){return"__private_"+bi+++"_"+t}var wi={version:"4.2.0"},W=zt("callbacks"),$e=zt("publish"),Se=class{constructor(){Object.defineProperty(this,$e,{value:Si}),this.state={},Object.defineProperty(this,W,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let r={...this.state},i={...this.state,...e};this.state=i,we(this,$e)[$e](r,i,e)}subscribe(e){return we(this,W)[W].add(e),()=>{we(this,W)[W].delete(e)}}};function Si(){for(var t=arguments.length,e=new Array(t),r=0; r<t; r++)e[r]=arguments[r];we(this,W)[W].forEach(i=>{i(...e)})}Se.VERSION=wi.version;var qt=Se;function te(t){let e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}var ke={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function re(t){var e;if(t.type)return t.type;let r=t.name?(e=te(t.name).extension)==null?void 0:e.toLowerCase():null;return r&&r in ke?ke[r]:"application/octet-stream"}function Fi(t){return t.charCodeAt(0).toString(32)}function Bt(t){let e="";return t.replace(/[^A-Z0-9]/gi, r=>(e+=`-${Fi(r)}`,"/"))+e}function Wt(t, e){let r=e||"uppy";return typeof t.name=="string"&&(r+=`-${Bt(t.name.toLowerCase())}`),t.type!==void 0&&(r+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(r+=`-${Bt(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(r+=`-${t.data.size}`),t.data.lastModified!==void 0&&(r+=`-${t.data.lastModified}`),r}function xi(t){return!t.isRemote||!t.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(t.remote.provider)}function Gt(t, e){if(xi(t))return t.id;let r=re(t);return Wt({...t,type:r},e)}function Re(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;let e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;let i=e[1].split(".",2),s=parseInt(i[0],10),n=parseInt(i[1],10);return s<15||s===15&&n<15063||s>18||s===18&&n>=18218}function Ne(t, e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}function Ie(t){return t<10?`0${t}`:t.toString()}function V(){let t=new Date,e=Ie(t.getHours()),r=Ie(t.getMinutes()),i=Ie(t.getSeconds());return`${e}:${r}:${i}`}var Ht={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),r=0; r<t; r++)e[r]=arguments[r];return console.error(`[Uppy] [${V()}]`,...e)}},Le={debug:function(){for(var t=arguments.length,e=new Array(t),r=0; r<t; r++)e[r]=arguments[r];return console.debug(`[Uppy] [${V()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),r=0; r<t; r++)e[r]=arguments[r];return console.warn(`[Uppy] [${V()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),r=0; r<t; r++)e[r]=arguments[r];return console.error(`[Uppy] [${V()}]`,...e)}};var ie=ve(Kt(),1),Qt=ve(Zt(),1),er={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},T=class extends Error{constructor(e, r){var i;super(e),this.isRestriction=!0,this.isUserFacing=(i=r?.isUserFacing)!=null?i:!0,r!=null&&r.file&&(this.file=r.file)}},Fe=class{constructor(e, r){this.getI18n=r,this.getOpts=()=>{var i;let s=e();if(((i=s.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(s.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return s}}validateAggregateRestrictions(e, r){let{maxTotalFileSize:i,maxNumberOfFiles:s}=this.getOpts().restrictions;if(s&&e.filter(o=>!o.isGhost).length+r.length>s)throw new T(`${this.getI18n()("youCanOnlyUploadX",{smart_count:s})}`);if(i){let n=[...e,...r].reduce((o, a)=>{var u;return o+((u=a.size)!=null?u:0)},0);if(n>i)throw new T(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,ie.default)(i),size:(0,ie.default)(n)}))}}validateSingleFile(e){let{maxFileSize:r,minFileSize:i,allowedFileTypes:s}=this.getOpts().restrictions;if(s&&!s.some(a=>a.includes("/")?e.type?(0,Qt.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=s.join(", ");throw new T(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(r&&e.size!=null&&e.size>r){var n;throw new T(this.getI18n()("exceedsSize",{size:(0,ie.default)(r),file:(n=e.name)!=null?n:this.getI18n()("unnamed")}),{file:e})}if(i&&e.size!=null&&e.size<i)throw new T(this.getI18n()("inferiorSize",{size:(0,ie.default)(i)}),{file:e})}validate(e, r){r.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,r)}validateMinNumberOfFiles(e){let{minNumberOfFiles:r}=this.getOpts().restrictions;if(r&&Object.keys(e).length<r)throw new T(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:r}))}getMissingRequiredMetaFields(e){var r;let i=new T(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(r=e.name)!=null?r:this.getI18n()("unnamed")})),{requiredMetaFields:s}=this.getOpts().restrictions,n=[];for(let o of s)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&n.push(o);return{missingFields:n,error:i}}};var tr={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function c(t, e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Oi=0;function v(t){return"__private_"+Oi+++"_"+t}var Ui={version:"4.4.4"},xe={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},x=v("plugins"),P=v("restricter"),se=v("storeUnsubscribe"),$=v("emitter"),G=v("preProcessors"),H=v("uploaders"),N=v("postProcessors"),O=v("informAndEmit"),pe=v("checkRequiredMetaFieldsOnFile"),ze=v("checkRequiredMetaFields"),ne=v("assertNewUploadAllowed"),We=v("transformFile"),oe=v("startIfAutoProceed"),ae=v("checkAndUpdateFileState"),ce=v("getFilesToRetry"),le=v("doRetryAll"),Ge=v("handleUploadProgress"),ue=v("updateTotalProgress"),I=v("updateTotalProgressThrottled"),He=v("calculateTotalProgress"),qe=v("addListeners"),E=v("updateOnlineStatus"),de=v("requestClientById"),k=v("createUpload"),Be=v("getUpload"),Y=v("removeUpload"),R=v("runUpload"),Pe=class t{constructor(e){Object.defineProperty(this,R,{value:Gi}),Object.defineProperty(this,Y,{value:Wi}),Object.defineProperty(this,Be,{value:Bi}),Object.defineProperty(this,k,{value:qi}),Object.defineProperty(this,qe,{value:zi}),Object.defineProperty(this,He,{value:Li}),Object.defineProperty(this,ue,{value:Ii}),Object.defineProperty(this,le,{value:Ni}),Object.defineProperty(this,ce,{value:Ri}),Object.defineProperty(this,ae,{value:ki}),Object.defineProperty(this,oe,{value:$i}),Object.defineProperty(this,We,{value:Mi}),Object.defineProperty(this,ne,{value:Ci}),Object.defineProperty(this,ze,{value:ji}),Object.defineProperty(this,pe,{value:Ai}),Object.defineProperty(this,O,{value:Ei}),Object.defineProperty(this,x,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:(0,rr.default)()}),Object.defineProperty(this,G,{writable:!0,value:new Set}),Object.defineProperty(this,H,{writable:!0,value:new Set}),Object.defineProperty(this,N,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,Ge,{writable:!0,value:(s, n)=>{let o=s?this.getFile(s.id):void 0;if(s==null||!o){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${s.id}`);return}let a={bytesTotal:n.bytesTotal,percentage:n.bytesTotal!=null&&Number.isFinite(n.bytesTotal)&&n.bytesTotal>0?Math.round(n.bytesUploaded/n.bytesTotal*100):void 0};o.progress.uploadStarted!=null?this.setFileState(s.id,{progress:{...o.progress,...a,bytesUploaded:n.bytesUploaded}}):this.setFileState(s.id,{progress:{...o.progress,...a}}),c(this,I)[I]()}}),Object.defineProperty(this,I,{writable:!0,value:(0,ir.default)(()=>c(this,ue)[ue](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,E,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,de,{writable:!0,value:new Map}),this.defaultLocale=tr;let r={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:er,meta:{},onBeforeFileAdded:(s, n)=>!Object.hasOwn(n,s.id),onBeforeUpload: s=>s,store:new qt,logger:Ht,infoTimeout:5e3},i={...r,...e};this.opts={...i,restrictions:{...r.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Le),this.log(`Using Core v${t.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...xe,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Re(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),c(this,P)[P]=new Fe(()=>this.opts,()=>this.i18n),c(this,se)[se]=this.store.subscribe((s, n, o)=>{this.emit("state-update",s,n,o),this.updateAll(n)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),c(this,qe)[qe]()}emit(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1; s<r; s++)i[s-1]=arguments[s];c(this,$)[$].emit(e,...i)}on(e, r){return c(this,$)[$].on(e,r),this}once(e, r){return c(this,$)[$].once(e,r),this}off(e, r){return c(this,$)[$].off(e,r),this}updateAll(e){this.iteratePlugins(r=>{r.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let r=this.getState().files;this.setState({files:{...r,...Object.fromEntries(Object.entries(e).map(i=>{let[s,n]=i;return[s,{...r[s],...n}]}))}})}setFileState(e, r){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:r})}i18nInit(){let e= i=>this.log(`Missing i18n string: ${i}`,"error"),r=new B([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=r.translate.bind(r),this.i18nArray=r.translateArray.bind(r),this.locale=r.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(r=>{r.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},r={...this.getState().files},i=Object.create(null);Object.keys(r).forEach(s=>{i[s]={...r[s],progress:{...r[s].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:i,...xe})}clear(){let{capabilities:e,currentUploads:r}=this.getState();if(Object.keys(r).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...xe,files:{}})}addPreProcessor(e){c(this,G)[G].add(e)}removePreProcessor(e){return c(this,G)[G].delete(e)}addPostProcessor(e){c(this,N)[N].add(e)}removePostProcessor(e){return c(this,N)[N].delete(e)}addUploader(e){c(this,H)[H].add(e)}removeUploader(e){return c(this,H)[H].delete(e)}setMeta(e){let r={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(s=>{i[s]={...i[s],meta:{...i[s].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:r,files:i})}setFileMeta(e, r){let i={...this.getState().files};if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let s={...i[e].meta,...r};i[e]={...i[e],meta:s},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(r=>this.getFile(r))}getObjectOfFilesPerState(){let{files:e,totalProgress:r,error:i}=this.getState(),s=Object.values(e),n=[],o=[],a=[],u=[],d=[],p=[],l=[],f=[],h=[];for(let g of s){let{progress:b}=g;!b.uploadComplete&&b.uploadStarted&&(n.push(g),g.isPaused||f.push(g)),b.uploadStarted||o.push(g),(b.uploadStarted||b.preprocess||b.postprocess)&&a.push(g),b.uploadStarted&&u.push(g),g.isPaused&&d.push(g),b.uploadComplete&&p.push(g),g.error&&l.push(g),(b.preprocess||b.postprocess)&&h.push(g)}return{newFiles:o,startedFiles:a,uploadStartedFiles:u,pausedFiles:d,completeFiles:p,erroredFiles:l,inProgressFiles:n,inProgressNotPausedFiles:f,processingFiles:h,isUploadStarted:u.length>0,isAllComplete:r===100&&p.length===s.length&&h.length===0,isAllErrored:!!i&&l.length===s.length,isAllPaused:n.length!==0&&d.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:s.some(g=>g.isGhost)}}validateRestrictions(e, r){r===void 0&&(r=this.getFiles());try{c(this,P)[P].validate(r,[e])}catch(i){return i}return null}validateSingleFile(e){try{c(this,P)[P].validateSingleFile(e)}catch(r){return r.message}return null}validateAggregateRestrictions(e){let r=this.getFiles();try{c(this,P)[P].validateAggregateRestrictions(r,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){let{files:r}=this.getState();return!!(r[e]&&!r[e].isGhost)}addFile(e){c(this,ne)[ne](e);let{nextFilesState:r,validFilesToAdd:i,errors:s}=c(this,ae)[ae]([e]),n=s.filter(a=>a.isRestriction);if(c(this,O)[O](n),s.length>0)throw s[0];this.setState({files:r});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),c(this,oe)[oe](),o.id}addFiles(e){c(this,ne)[ne]();let{nextFilesState:r,validFilesToAdd:i,errors:s}=c(this,ae)[ae](e),n=s.filter(a=>a.isRestriction);c(this,O)[O](n);let o=s.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(u=>{a+=`
 * ${u.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let u=new Error(a);throw u.errors=o,u}}this.setState({files:r}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&c(this,oe)[oe]()}removeFiles(e){let{files:r,currentUploads:i}=this.getState(),s={...r},n={...i},o=Object.create(null);e.forEach(p=>{r[p]&&(o[p]=r[p],delete s[p])});function a(p){return o[p]===void 0}Object.keys(n).forEach(p=>{let l=i[p].fileIDs.filter(a);if(l.length===0){delete n[p];return}let{capabilities:f}=this.getState();if(l.length!==i[p].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");n[p]={...i[p],fileIDs:l}});let u={currentUploads:n,files:s};Object.keys(s).length===0&&(u.allowNewUpload=!0,u.error=null,u.recoveredState=null),this.setState(u),c(this,I)[I]();let d=Object.keys(o);d.forEach(p=>{this.emit("file-removed",o[p])}),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let r=this.getFile(e),s=!(r.isPaused||!1);return this.setFileState(e,{isPaused:s}),this.emit("upload-pause",r,s),s}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let s={...e[i],isPaused:!0};e[i]=s}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let s={...e[i],isPaused:!1,error:null};e[i]=s}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){let e=await c(this,le)[le]();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),r=Object.keys(e);r.length&&this.removeFiles(r),this.setState(xe)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let r=c(this,k)[k]([e],{forceAllowNewUpload:!0});return c(this,R)[R](r)}logout(){this.iteratePlugins(e=>{var r;(r=e.provider)==null||r.logout==null||r.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return c(this,ue)[ue]()}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let u=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(u)}for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];let n=new e(this,...i),o=n.id;if(!o)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let u=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(u)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),n.type in c(this,x)[x]?c(this,x)[x][n.type].push(n):c(this,x)[x][n.type]=[n],n.install(),this.emit("plugin-added",n),this}getPlugin(e){for(let r of Object.values(c(this,x)[x])){let i=r.find(s=>s.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return c(this,x)[x][e]}iteratePlugins(e){Object.values(c(this,x)[x]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let r=c(this,x)[x][e.type],i=r.findIndex(o=>o.id===e.id);i!==-1&&r.splice(i,1);let n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),c(this,se)[se](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",c(this,E)[E]),window.removeEventListener("offline",c(this,E)[E]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,r,i){r===void 0&&(r="info"),i===void 0&&(i=3e3);let s=typeof e=="object";this.setState({info:[...this.getState().info,{type:r,message:s?e.message:e,details:s?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,r){let{logger:i}=this.opts;switch(r){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,r){c(this,de)[de].set(e,r)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let r=c(this,de)[de].get(e.remote.requestClientId);if(r==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return r}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?c(this,R)[R](e):(c(this,Y)[Y](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return c(this,k)[k](...arguments)}addResultData(e,r){if(!c(this,Be)[Be](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),s={...i[e],result:{...i[e].result,...r}};this.setState({currentUploads:{...i,[e]:s}})}async upload(){var e;(e=c(this,x)[x].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:r}=this.getState();if(c(this,ce)[ce]().length>0){let n=await c(this,le)[le]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",n),n;({files:r}=this.getState())}let s=this.opts.onBeforeUpload(r);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(r=s,this.setState({files:r})),Promise.resolve().then(()=>c(this,P)[P].validateMinNumberOfFiles(r)).catch(n=>{throw c(this,O)[O]([n]),n}).then(()=>{if(!c(this,ze)[ze](r))throw new T(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(async()=>{let{currentUploads:n}=this.getState(),o=Object.values(n).flatMap(p=>p.fileIDs),a=[];Object.keys(r).forEach(p=>{let l=this.getFile(p);!l.progress.uploadStarted&&o.indexOf(p)===-1&&a.push(l.id)});let u=c(this,k)[k](a),d=await c(this,R)[R](u);return this.emit("complete",d),d}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}};function Ei(t){for(let n of t)n.isRestriction?this.emit("restriction-failed",n.file,n):this.emit("error",n,n.file),this.log(n,"warning");let e=t.filter(n=>n.isUserFacing),r=4,i=e.slice(0,r),s=e.slice(r);i.forEach(n=>{let{message:o,details:a=""}=n;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),s.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:s.length})})}function Ai(t){let{missingFields:e,error:r}=c(this,P)[P].getMissingRequiredMetaFields(t);return e.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:e}),this.log(r.message),this.emit("restriction-failed",t,r),!1):!0}function ji(t){let e=!0;for(let r of Object.values(t))c(this,pe)[pe](r)||(e=!1);return e}function Ci(t){let{allowNewUpload:e}=this.getState();if(e===!1){let r=new T(this.i18n("noMoreFilesAllowed"),{file:t});throw c(this,O)[O]([r]),r}}function Mi(t){let e=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,r=re(e),i=Ne(r,e),s=te(i).extension,n=Gt(e,this.getID()),o=e.meta||{};o.name=i,o.type=r;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:n,name:i,extension:s||"",meta:{...this.getState().meta,...o},type:r,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function $i(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))}function ki(t){let{files:e}=this.getState(),r={...e},i=[],s=[];for(let a of t)try{var n;let u=c(this,We)[We](a),d=(n=e[u.id])==null?void 0:n.isGhost;d&&(u={...e[u.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${u.name}, ${u.id}`));let p=this.opts.onBeforeFileAdded(u,r);if(!p&&this.checkIfFileAlreadyExists(u.id)){var o;throw new T(this.i18n("noDuplicates",{fileName:(o=u.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(p===!1&&!d)throw new T("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof p=="object"&&p!==null&&(u=p),c(this,P)[P].validateSingleFile(u),r[u.id]=u,i.push(u)}catch(u){s.push(u)}try{c(this,P)[P].validateAggregateRestrictions(Object.values(e),i)}catch(a){return s.push(a),{nextFilesState:e,validFilesToAdd:[],errors:s}}return{nextFilesState:r,validFilesToAdd:i,errors:s}}function Ri(){let{files:t}=this.getState();return Object.keys(t).filter(e=>t[e].error)}async function Ni(){let t=c(this,ce)[ce](),e={...this.getState().files};if(t.forEach(i=>{e[i]={...e[i],isPaused:!1,error:null}}),this.setState({files:e,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};let r=c(this,k)[k](t,{forceAllowNewUpload:!0});return c(this,R)[R](r)}function Ii(){var t,e;let r=c(this,He)[He](),i=null;r!=null&&(i=Math.round(r*100),i>100?i=100:i<0&&(i=0)),this.emit("progress",(t=i)!=null?t:0),this.setState({totalProgress:(e=i)!=null?e:0})}function Li(){let e=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(e.length===0)return 0;if(e.every(a=>a.progress.uploadComplete))return 1;let r=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,i=e.filter(r),s=e.filter(a=>!r(a));if(i.every(a=>a.progress.uploadComplete)&&s.length>0&&!s.every(a=>a.progress.uploadComplete))return null;let n=i.reduce((a,u)=>{var d;return a+((d=u.progress.bytesTotal)!=null?d:0)},0),o=i.reduce((a,u)=>a+(u.progress.bytesUploaded||0),0);return n===0?0:o/n}function zi(){let t=(i,s,n)=>{let o=i.message||"Unknown error";i.details&&(o+=` ${i.details}`),this.setState({error:o}),s!=null&&s.id in this.getState().files&&this.setFileState(s.id,{error:o,response:n})};this.on("error",t),this.on("upload-error",(i,s,n)=>{if(t(s,i,n),typeof s=="object"&&s.message){var o;this.log(s.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=i?.name)!=null?o:""}));a.isUserFacing=!0,a.details=s.message,s.details&&(a.details+=` ${s.details}`),c(this,O)[O]([a])}else c(this,O)[O]([s])});let e=null;this.on("upload-stalled",(i,s)=>{let{message:n}=i,o=s.map(a=>a.meta.name).join(", ");e||(this.info({message:n,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${n} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let r=i=>{let s=i.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),n=Object.fromEntries(s.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(n)};this.on("upload-start",r),this.on("upload-progress",c(this,Ge)[Ge]),this.on("upload-success",(i,s)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...n,postprocess:c(this,N)[N].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal},response:s,uploadURL:s.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:s.bytesUploaded||n.bytesTotal}),c(this,I)[I]()}),this.on("preprocess-progress",(i,s)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:s}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let s={...this.getState().files};s[i.id]={...s[i.id],progress:{...s[i.id].progress}},delete s[i.id].progress.preprocess,this.setState({files:s})}),this.on("postprocess-progress",(i,s)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:s}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let s={...this.getState().files};s[i.id]={...s[i.id],progress:{...s[i.id].progress}},delete s[i.id].progress.postprocess,this.setState({files:s})}),this.on("restored",()=>{c(this,I)[I]()}),this.on("dashboard:file-edit-complete",i=>{i&&c(this,pe)[pe](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",c(this,E)[E]),window.addEventListener("offline",c(this,E)[E]),setTimeout(c(this,E)[E],3e3))}function qi(t,e){e===void 0&&(e={});let{forceAllowNewUpload:r=!1}=e,{allowNewUpload:i,currentUploads:s}=this.getState();if(!i&&!r)throw new Error("Cannot create a new upload: already uploading.");let n=nt();return this.emit("upload",n,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...s,[n]:{fileIDs:t,step:0,result:{}}}}),n}function Bi(t){let{currentUploads:e}=this.getState();return e[t]}function Wi(t){let e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function Gi(t){let e=()=>{let{currentUploads:n}=this.getState();return n[t]},r=e(),i=[...c(this,G)[G],...c(this,H)[H],...c(this,N)[N]];try{for(let n=r.step||0;n<i.length&&r;n++){let o=i[n];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...r,step:n}}});let{fileIDs:a}=r;await o(a,t),r=e()}}catch(n){throw c(this,Y)[Y](t),n}if(r){r.fileIDs.forEach(u=>{let d=this.getFile(u);d&&d.progress.postprocess&&this.emit("postprocess-complete",d)});let n=r.fileIDs.map(u=>this.getFile(u)),o=n.filter(u=>!u.error),a=n.filter(u=>u.error);this.addResultData(t,{successful:o,failed:a,uploadID:t}),r=e()}let s;return r&&(s=r.result,c(this,Y)[Y](t)),s==null&&this.log(`Not setting result for an upload that has been removed: ${t}`),s}Pe.VERSION=Ui.version;var sr=Pe;var ge,w,ur,Hi,K,nr,dr,cr,pr,Ve,Ye,Ke,Yi,fe={},hr=[],Ki=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,me=Array.isArray;function M(t,e){for(var r in e)t[r]=e[r];return t}function Xe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Vi(t,e,r){var i,s,n,o={};for(n in e)n=="key"?i=e[n]:n=="ref"?s=e[n]:o[n]=e[n];if(arguments.length>2&&(o.children=arguments.length>3?ge.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)o[n]==null&&(o[n]=t.defaultProps[n]);return he(t,o,i,s,null)}function he(t,e,r,i,s){var n={type:t,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++ur,__i:-1,__u:0};return s==null&&w.vnode!=null&&w.vnode(n),n}function en(){return{current:null}}function Ee(t){return t.children}function Oe(t,e){this.props=t,this.context=e}function X(t,e){if(e==null)return t.__?X(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?X(t):null}function fr(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return fr(t)}}function or(t){(!t.__d&&(t.__d=!0)&&K.push(t)&&!Ue.__r++||nr!=w.debounceRendering)&&((nr=w.debounceRendering)||dr)(Ue)}function Ue(){for(var t,e,r,i,s,n,o,a=1;K.length;)K.length>a&&K.sort(cr),t=K.shift(),a=K.length,t.__d&&(r=void 0,s=(i=(e=t).__v).__e,n=[],o=[],e.__P&&((r=M({},i)).__v=i.__v+1,w.vnode&&w.vnode(r),De(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,n,s??X(i),!!(32&i.__u),o),r.__v=i.__v,r.__.__k[r.__i]=r,_r(n,r,o),r.__e!=s&&fr(r)));Ue.__r=0}function gr(t,e,r,i,s,n,o,a,u,d,p){var l,f,h,g,b,S,m=i&&i.__k||hr,_=e.length;for(u=Xi(r,e,m,u,_),l=0;l<_;l++)(h=r.__k[l])!=null&&(f=h.__i==-1?fe:m[h.__i]||fe,h.__i=l,S=De(t,h,f,s,n,o,a,u,d,p),g=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Je(f.ref,null,h),p.push(h.ref,h.__c||g,h)),b==null&&g!=null&&(b=g),4&h.__u||f.__k===h.__k?u=mr(h,u,t):typeof h.type=="function"&&S!==void 0?u=S:g&&(u=g.nextSibling),h.__u&=-7);return r.__e=b,u}function Xi(t,e,r,i,s){var n,o,a,u,d,p=r.length,l=p,f=0;for(t.__k=new Array(s),n=0;n<s;n++)(o=e[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(u=n+f,(o=t.__k[n]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?he(null,o,null,null,null):me(o)?he(Ee,{children:o},null,null,null):o.constructor==null&&o.__b>0?he(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,a=null,(d=o.__i=Ji(o,r,u,l))!=-1&&(l--,(a=r[d])&&(a.__u|=2)),a==null||a.__v==null?(d==-1&&(s>p?f--:s<p&&f++),typeof o.type!="function"&&(o.__u|=4)):d!=u&&(d==u-1?f--:d==u+1?f++:(d>u?f--:f++,o.__u|=4))):t.__k[n]=null;if(l)for(n=0;n<p;n++)(a=r[n])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=X(a)),yr(a,a));return i}function mr(t,e,r){var i,s;if(typeof t.type=="function"){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,e=mr(i[s],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=X(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Di(t,e){return e=e||[],t==null||typeof t=="boolean"||(me(t)?t.some(function(r){Di(r,e)}):e.push(t)),e}function Ji(t,e,r,i){var s,n,o=t.key,a=t.type,u=e[r];if(u===null&&t.key==null||u&&o==u.key&&a==u.type&&(2&u.__u)==0)return r;if(i>(u!=null&&(2&u.__u)==0?1:0))for(s=r-1,n=r+1;s>=0||n<e.length;){if(s>=0){if((u=e[s])&&(2&u.__u)==0&&o==u.key&&a==u.type)return s;s--}if(n<e.length){if((u=e[n])&&(2&u.__u)==0&&o==u.key&&a==u.type)return n;n++}}return-1}function ar(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||Ki.test(e)?r:r+"px"}function Te(t,e,r,i,s){var n;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)r&&e in r||ar(t.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||ar(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")n=e!=(e=e.replace(pr,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=r,r?i?r.u=i.u:(r.u=Ve,t.addEventListener(e,n?Ke:Ye,n)):t.removeEventListener(e,n?Ke:Ye,n);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function lr(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=Ve++;else if(e.t<r.u)return;return r(w.event?w.event(e):e)}}}function De(t,e,r,i,s,n,o,a,u,d){var p,l,f,h,g,b,S,m,_,q,A,L,y,U,j,z,Ae,C=e.type;if(e.constructor!=null)return null;128&r.__u&&(u=!!(32&r.__u),n=[a=e.__e=r.__e]),(p=w.__b)&&p(e);e:if(typeof C=="function")try{if(m=e.props,_="prototype"in C&&C.prototype.render,q=(p=C.contextType)&&i[p.__c],A=p?q?q.props.value:p.__:i,r.__c?S=(l=e.__c=r.__c).__=l.__E:(_?e.__c=l=new C(m,A):(e.__c=l=new Oe(m,A),l.constructor=C,l.render=Qi),q&&q.sub(l),l.props=m,l.state||(l.state={}),l.context=A,l.__n=i,f=l.__d=!0,l.__h=[],l._sb=[]),_&&l.__s==null&&(l.__s=l.state),_&&C.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=M({},l.__s)),M(l.__s,C.getDerivedStateFromProps(m,l.__s))),h=l.props,g=l.state,l.__v=e,f)_&&C.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),_&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(_&&C.getDerivedStateFromProps==null&&m!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,A),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,A)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(l.props=m,l.state=l.__s,l.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(J){J&&(J.__=e)}),L=0;L<l._sb.length;L++)l.__h.push(l._sb[L]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,A),_&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,g,b)})}if(l.context=A,l.props=m,l.__P=t,l.__e=!1,y=w.__r,U=0,_){for(l.state=l.__s,l.__d=!1,y&&y(e),p=l.render(l.props,l.state,l.context),j=0;j<l._sb.length;j++)l.__h.push(l._sb[j]);l._sb=[]}else do l.__d=!1,y&&y(e),p=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++U<25);l.state=l.__s,l.getChildContext!=null&&(i=M(M({},i),l.getChildContext())),_&&!f&&l.getSnapshotBeforeUpdate!=null&&(b=l.getSnapshotBeforeUpdate(h,g)),z=p,p!=null&&p.type===Ee&&p.key==null&&(z=vr(p.props.children)),a=gr(t,me(z)?z:[z],e,r,i,s,n,o,a,u,d),l.base=e.__e,e.__u&=-161,l.__h.length&&o.push(l),S&&(l.__E=l.__=null)}catch(J){if(e.__v=null,u||n!=null)if(J.then){for(e.__u|=u?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;n[n.indexOf(a)]=null,e.__e=a}else for(Ae=n.length;Ae--;)Xe(n[Ae]);else e.__e=r.__e,e.__k=r.__k;w.__e(J,e,r)}else n==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=Zi(r.__e,e,r,i,s,n,o,u,d);return(p=w.diffed)&&p(e),128&e.__u?void 0:a}function _r(t,e,r){for(var i=0;i<r.length;i++)Je(r[i],r[++i],r[++i]);w.__c&&w.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(n){n.call(s)})}catch(n){w.__e(n,s.__v)}})}function vr(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:me(t)?t.map(vr):M({},t)}function Zi(t,e,r,i,s,n,o,a,u){var d,p,l,f,h,g,b,S=r.props,m=e.props,_=e.type;if(_=="svg"?s="http://www.w3.org/2000/svg":_=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),n!=null){for(d=0;d<n.length;d++)if((h=n[d])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){t=h,n[d]=null;break}}if(t==null){if(_==null)return document.createTextNode(m);t=document.createElementNS(s,_,m.is&&m),a&&(w.__m&&w.__m(e,n),a=!1),n=null}if(_==null)S===m||a&&t.data==m||(t.data=m);else{if(n=n&&ge.call(t.childNodes),S=r.props||fe,!a&&n!=null)for(S={},d=0;d<t.attributes.length;d++)S[(h=t.attributes[d]).name]=h.value;for(d in S)if(h=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")l=h;else if(!(d in m)){if(d=="value"&&"defaultValue"in m||d=="checked"&&"defaultChecked"in m)continue;Te(t,d,null,h,s)}}for(d in m)h=m[d],d=="children"?f=h:d=="dangerouslySetInnerHTML"?p=h:d=="value"?g=h:d=="checked"?b=h:a&&typeof h!="function"||S[d]===h||Te(t,d,h,S[d],s);if(p)a||l&&(p.__html==l.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(l&&(t.innerHTML=""),gr(e.type=="template"?t.content:t,me(f)?f:[f],e,r,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":s,n,o,n?n[0]:r.__k&&X(r,0),a,u),n!=null)for(d=n.length;d--;)Xe(n[d]);a||(d="value",_=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[d]||_=="progress"&&!g||_=="option"&&g!=S[d])&&Te(t,d,g,S[d],s),d="checked",b!=null&&b!=t[d]&&Te(t,d,b,S[d],s))}return t}function Je(t,e,r){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(s){w.__e(s,r)}}function yr(t,e,r){var i,s;if(w.unmount&&w.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||Je(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){w.__e(n,e)}i.base=i.__P=null}if(i=t.__k)for(s=0;s<i.length;s++)i[s]&&yr(i[s],e,r||typeof t.type!="function");r||Xe(t.__e),t.__c=t.__=t.__e=void 0}function Qi(t,e,r){return this.constructor(t,r)}function Ze(t,e,r){var i,s,n,o;e==document&&(e=document.documentElement),w.__&&w.__(t,e),s=(i=typeof r=="function")?null:r&&r.__k||e.__k,n=[],o=[],De(e,t=(!i&&r||e).__k=Vi(Ee,null,[t]),s||fe,fe,e.namespaceURI,!i&&r?[r]:s?null:e.firstChild?ge.call(e.childNodes):null,n,!i&&r?r:s?s.__e:e.firstChild,i,o),_r(n,t,o)}function tn(t,e,r){var i,s,n,o,a=M({},t.props);for(n in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)n=="key"?i=e[n]:n=="ref"?s=e[n]:a[n]=e[n]==null&&o!=null?o[n]:e[n];return arguments.length>2&&(a.children=arguments.length>3?ge.call(arguments,2):r),he(t.type,a,i||t.key,s||t.ref,null)}ge=hr.slice,w={__e:function(t,e,r,i){for(var s,n,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((n=s.constructor)&&n.getDerivedStateFromError!=null&&(s.setState(n.getDerivedStateFromError(t)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,i||{}),o=s.__d),o)return s.__E=s}catch(a){t=a}throw t}},ur=0,Hi=function(t){return t!=null&&t.constructor==null},Oe.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=M({},this.state),typeof t=="function"&&(t=t(M({},r),this.props)),t&&M(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),or(this))},Oe.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),or(this))},Oe.prototype.render=Ee,K=[],dr=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,cr=function(t,e){return t.__v.__b-e.__v.__b},Ue.__r=0,pr=/(PointerCapture)$|Capture$/i,Ve=0,Ye=lr(!1),Ke=lr(!0),Yi=0;function Qe(t){return typeof t!="object"||t===null||!("nodeType"in t)?!1:t.nodeType===Node.ELEMENT_NODE}function es(t,e){return e===void 0&&(e=document),typeof t=="string"?e.querySelector(t):Qe(t)?t:null}var br=es;function ts(t){for(var e;t&&!t.dir;)t=t.parentNode;return(e=t)==null?void 0:e.dir}var wr=ts;var D=class{constructor(e,r){this.uppy=e,this.opts=r??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:r}=this.uppy.getState();this.uppy.setState({plugins:{...r,[this.id]:{...r[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new B([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function Sr(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var rs=0;function is(t){return"__private_"+rs+++"_"+t}function ss(t){let e=null,r;return function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return r=s,e||(e=Promise.resolve().then(()=>(e=null,t(...r)))),e}}var _e=is("updateUI"),et=class t extends D{constructor(){super(...arguments),Object.defineProperty(this,_e,{writable:!0,value:void 0})}getTargetPlugin(e){let r;if(typeof e?.addTarget=="function")r=e,r instanceof t||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:r,UIPlugin:t}}));else if(typeof e=="function"){let i=e;this.uppy.iteratePlugins(s=>{s instanceof i&&(r=s)})}return r}mount(e,r){let i=r.id,s=br(e);if(s){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),Sr(this,_e)[_e]=ss(u=>{this.uppy.getPlugin(this.id)&&(Ze(this.render(u,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(s.innerHTML=""),Ze(this.render(this.uppy.getState(),a),a),this.el=a,s.appendChild(a),a.dir=this.opts.direction||wr(a)||"ltr",this.onMount(),this.el}let n=this.getTargetPlugin(e);if(n)return this.uppy.log(`Installing ${i} to ${n.id}`),this.parent=n,this.el=n.addTarget(r),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,r){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var r,i;(r=(i=Sr(this,_e))[_e])==null||r.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}},ns=et;export{Nt as a,te as b,ke as c,Gt as d,Le as e,Kt as f,sr as g,w as h,Vi as i,en as j,Ee as k,Oe as l,Di as m,tn as n,Qe as o,wr as p,D as q,ns as r};
/*! Bundled license information:

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/
//# sourceMappingURL=chunk-7MEJP3IB.js.map
