{
  "version": 3,
  "sources": ["../../../../../node_modules/@uppy/core/lib/EventManager.js", "../../../../../node_modules/@uppy/utils/lib/RateLimitedQueue.js", "../../../../../node_modules/@uppy/utils/lib/NetworkError.js", "../../../../../node_modules/@uppy/utils/lib/isNetworkError.js", "../../../../../node_modules/@uppy/utils/lib/ProgressTimeout.js", "../../../../../node_modules/@uppy/utils/lib/fetcher.js", "../../../../../node_modules/@uppy/utils/lib/fileFilters.js", "../../../../../node_modules/@uppy/utils/lib/getAllowedMetaFields.js", "../../../../../node_modules/@uppy/xhr-upload/lib/locale.js", "../../../../../node_modules/@uppy/xhr-upload/lib/index.js"],
  "sourcesContent": ["function _classPrivateFieldLooseBase(e, t) { if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\"); return e; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(e) { return \"__private_\" + id++ + \"_\" + e; }\nvar _uppy = /*#__PURE__*/_classPrivateFieldLooseKey(\"uppy\");\nvar _events = /*#__PURE__*/_classPrivateFieldLooseKey(\"events\");\n/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n  constructor(uppy) {\n    Object.defineProperty(this, _uppy, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _events, {\n      writable: true,\n      value: []\n    });\n    _classPrivateFieldLooseBase(this, _uppy)[_uppy] = uppy;\n  }\n  on(event, fn) {\n    _classPrivateFieldLooseBase(this, _events)[_events].push([event, fn]);\n    return _classPrivateFieldLooseBase(this, _uppy)[_uppy].on(event, fn);\n  }\n  remove() {\n    for (const [event, fn] of _classPrivateFieldLooseBase(this, _events)[_events].splice(0)) {\n      _classPrivateFieldLooseBase(this, _uppy)[_uppy].off(event, fn);\n    }\n  }\n  onFilePause(fileID, cb) {\n    this.on('upload-pause', (file, isPaused) => {\n      if (fileID === (file == null ? void 0 : file.id)) {\n        cb(isPaused);\n      }\n    });\n  }\n  onFileRemove(fileID, cb) {\n    this.on('file-removed', file => {\n      if (fileID === file.id) cb(file.id);\n    });\n  }\n  onPause(fileID, cb) {\n    this.on('upload-pause', (file, isPaused) => {\n      if (fileID === (file == null ? void 0 : file.id)) {\n        // const isPaused = this.#uppy.pauseResume(fileID)\n        cb(isPaused);\n      }\n    });\n  }\n  onRetry(fileID, cb) {\n    this.on('upload-retry', file => {\n      if (fileID === (file == null ? void 0 : file.id)) {\n        cb();\n      }\n    });\n  }\n  onRetryAll(fileID, cb) {\n    this.on('retry-all', () => {\n      if (!_classPrivateFieldLooseBase(this, _uppy)[_uppy].getFile(fileID)) return;\n      cb();\n    });\n  }\n  onPauseAll(fileID, cb) {\n    this.on('pause-all', () => {\n      if (!_classPrivateFieldLooseBase(this, _uppy)[_uppy].getFile(fileID)) return;\n      cb();\n    });\n  }\n  onCancelAll(fileID, eventHandler) {\n    var _this = this;\n    this.on('cancel-all', function () {\n      if (!_classPrivateFieldLooseBase(_this, _uppy)[_uppy].getFile(fileID)) return;\n      eventHandler(...arguments);\n    });\n  }\n  onResumeAll(fileID, cb) {\n    this.on('resume-all', () => {\n      if (!_classPrivateFieldLooseBase(this, _uppy)[_uppy].getFile(fileID)) return;\n      cb();\n    });\n  }\n}", "function _classPrivateFieldLooseBase(e, t) { if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\"); return e; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(e) { return \"__private_\" + id++ + \"_\" + e; }\nfunction createCancelError(cause) {\n  return new Error('Cancelled', {\n    cause\n  });\n}\nfunction abortOn(signal) {\n  if (signal != null) {\n    var _this$then;\n    const abortPromise = () => this.abort(signal.reason);\n    signal.addEventListener('abort', abortPromise, {\n      once: true\n    });\n    const removeAbortListener = () => {\n      signal.removeEventListener('abort', abortPromise);\n    };\n    (_this$then = this.then) == null || _this$then.call(this, removeAbortListener, removeAbortListener);\n  }\n  return this;\n}\nvar _activeRequests = /*#__PURE__*/_classPrivateFieldLooseKey(\"activeRequests\");\nvar _queuedHandlers = /*#__PURE__*/_classPrivateFieldLooseKey(\"queuedHandlers\");\nvar _paused = /*#__PURE__*/_classPrivateFieldLooseKey(\"paused\");\nvar _pauseTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"pauseTimer\");\nvar _downLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"downLimit\");\nvar _upperLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"upperLimit\");\nvar _rateLimitingTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"rateLimitingTimer\");\nvar _call = /*#__PURE__*/_classPrivateFieldLooseKey(\"call\");\nvar _queueNext = /*#__PURE__*/_classPrivateFieldLooseKey(\"queueNext\");\nvar _next = /*#__PURE__*/_classPrivateFieldLooseKey(\"next\");\nvar _queue = /*#__PURE__*/_classPrivateFieldLooseKey(\"queue\");\nvar _dequeue = /*#__PURE__*/_classPrivateFieldLooseKey(\"dequeue\");\nvar _resume = /*#__PURE__*/_classPrivateFieldLooseKey(\"resume\");\nvar _increaseLimit = /*#__PURE__*/_classPrivateFieldLooseKey(\"increaseLimit\");\nexport class RateLimitedQueue {\n  constructor(limit) {\n    Object.defineProperty(this, _dequeue, {\n      value: _dequeue2\n    });\n    Object.defineProperty(this, _queue, {\n      value: _queue2\n    });\n    Object.defineProperty(this, _next, {\n      value: _next2\n    });\n    Object.defineProperty(this, _queueNext, {\n      value: _queueNext2\n    });\n    Object.defineProperty(this, _call, {\n      value: _call2\n    });\n    Object.defineProperty(this, _activeRequests, {\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, _queuedHandlers, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _paused, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _pauseTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _downLimit, {\n      writable: true,\n      value: 1\n    });\n    Object.defineProperty(this, _upperLimit, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _rateLimitingTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _resume, {\n      writable: true,\n      value: () => this.resume()\n    });\n    Object.defineProperty(this, _increaseLimit, {\n      writable: true,\n      value: () => {\n        if (_classPrivateFieldLooseBase(this, _paused)[_paused]) {\n          _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], 0);\n          return;\n        }\n        _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] = this.limit;\n        this.limit = Math.ceil((_classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] + _classPrivateFieldLooseBase(this, _downLimit)[_downLimit]) / 2);\n        for (let i = _classPrivateFieldLooseBase(this, _downLimit)[_downLimit]; i <= this.limit; i++) {\n          _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n        }\n        if (_classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] - _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] > 3) {\n          _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], 2000);\n        } else {\n          _classPrivateFieldLooseBase(this, _downLimit)[_downLimit] = Math.floor(_classPrivateFieldLooseBase(this, _downLimit)[_downLimit] / 2);\n        }\n      }\n    });\n    if (typeof limit !== 'number' || limit === 0) {\n      this.limit = Infinity;\n    } else {\n      this.limit = limit;\n    }\n  }\n  run(fn, queueOptions) {\n    if (!_classPrivateFieldLooseBase(this, _paused)[_paused] && _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] < this.limit) {\n      return _classPrivateFieldLooseBase(this, _call)[_call](fn);\n    }\n    return _classPrivateFieldLooseBase(this, _queue)[_queue](fn, queueOptions);\n  }\n  wrapSyncFunction(fn, queueOptions) {\n    var _this = this;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      const queuedRequest = _this.run(() => {\n        fn(...args);\n        queueMicrotask(() => queuedRequest.done());\n        return () => {};\n      }, queueOptions);\n      return {\n        abortOn,\n        abort() {\n          queuedRequest.abort();\n        }\n      };\n    };\n  }\n  wrapPromiseFunction(fn, queueOptions) {\n    var _this2 = this;\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      let queuedRequest;\n      const outerPromise = new Promise((resolve, reject) => {\n        queuedRequest = _this2.run(() => {\n          let cancelError;\n          let innerPromise;\n          try {\n            innerPromise = Promise.resolve(fn(...args));\n          } catch (err) {\n            innerPromise = Promise.reject(err);\n          }\n          innerPromise.then(result => {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              resolve(result);\n            }\n          }, err => {\n            if (cancelError) {\n              reject(cancelError);\n            } else {\n              queuedRequest.done();\n              reject(err);\n            }\n          });\n          return cause => {\n            cancelError = createCancelError(cause);\n          };\n        }, queueOptions);\n      });\n      outerPromise.abort = cause => {\n        queuedRequest.abort(cause);\n      };\n      outerPromise.abortOn = abortOn;\n      return outerPromise;\n    };\n  }\n  resume() {\n    _classPrivateFieldLooseBase(this, _paused)[_paused] = false;\n    clearTimeout(_classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer]);\n    for (let i = 0; i < this.limit; i++) {\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    }\n  }\n  /**\n   * Freezes the queue for a while or indefinitely.\n   *\n   * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n   *                                    If omitted, the queue won't resume automatically.\n   */\n  pause(duration) {\n    if (duration === void 0) {\n      duration = null;\n    }\n    _classPrivateFieldLooseBase(this, _paused)[_paused] = true;\n    clearTimeout(_classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer]);\n    if (duration != null) {\n      _classPrivateFieldLooseBase(this, _pauseTimer)[_pauseTimer] = setTimeout(_classPrivateFieldLooseBase(this, _resume)[_resume], duration);\n    }\n  }\n\n  /**\n   * Pauses the queue for a duration, and lower the limit of concurrent requests\n   * when the queue resumes. When the queue resumes, it tries to progressively\n   * increase the limit in `this.#increaseLimit` until another call is made to\n   * `this.rateLimit`.\n   * Call this function when using the RateLimitedQueue for network requests and\n   * the remote server responds with 429 HTTP code.\n   *\n   * @param {number} duration in milliseconds.\n   */\n  rateLimit(duration) {\n    clearTimeout(_classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer]);\n    this.pause(duration);\n    if (this.limit > 1 && Number.isFinite(this.limit)) {\n      _classPrivateFieldLooseBase(this, _upperLimit)[_upperLimit] = this.limit - 1;\n      this.limit = _classPrivateFieldLooseBase(this, _downLimit)[_downLimit];\n      _classPrivateFieldLooseBase(this, _rateLimitingTimer)[_rateLimitingTimer] = setTimeout(_classPrivateFieldLooseBase(this, _increaseLimit)[_increaseLimit], duration);\n    }\n  }\n  get isPaused() {\n    return _classPrivateFieldLooseBase(this, _paused)[_paused];\n  }\n}\nfunction _call2(fn) {\n  _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] += 1;\n  let done = false;\n  let cancelActive;\n  try {\n    cancelActive = fn();\n  } catch (err) {\n    _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n    throw err;\n  }\n  return {\n    abort: cause => {\n      if (done) return;\n      done = true;\n      _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n      cancelActive == null || cancelActive(cause);\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    },\n    done: () => {\n      if (done) return;\n      done = true;\n      _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] -= 1;\n      _classPrivateFieldLooseBase(this, _queueNext)[_queueNext]();\n    }\n  };\n}\nfunction _queueNext2() {\n  // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n  // one by one without continuously _advancing_ it (and starting new tasks before immediately\n  // aborting them)\n  queueMicrotask(() => _classPrivateFieldLooseBase(this, _next)[_next]());\n}\nfunction _next2() {\n  if (_classPrivateFieldLooseBase(this, _paused)[_paused] || _classPrivateFieldLooseBase(this, _activeRequests)[_activeRequests] >= this.limit) {\n    return;\n  }\n  if (_classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].length === 0) {\n    return;\n  }\n\n  // Dispatch the next request, and update the abort/done handlers\n  // so that cancelling it does the Right Thing (and doesn't just try\n  // to dequeue an already-running request).\n  const next = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].shift();\n  if (next == null) {\n    throw new Error('Invariant violation: next is null');\n  }\n  const handler = _classPrivateFieldLooseBase(this, _call)[_call](next.fn);\n  next.abort = handler.abort;\n  next.done = handler.done;\n}\nfunction _queue2(fn, options) {\n  const handler = {\n    fn,\n    priority: (options == null ? void 0 : options.priority) || 0,\n    abort: () => {\n      _classPrivateFieldLooseBase(this, _dequeue)[_dequeue](handler);\n    },\n    done: () => {\n      throw new Error('Cannot mark a queued request as done: this indicates a bug');\n    }\n  };\n  const index = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].findIndex(other => {\n    return handler.priority > other.priority;\n  });\n  if (index === -1) {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].push(handler);\n  } else {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].splice(index, 0, handler);\n  }\n  return handler;\n}\nfunction _dequeue2(handler) {\n  const index = _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].indexOf(handler);\n  if (index !== -1) {\n    _classPrivateFieldLooseBase(this, _queuedHandlers)[_queuedHandlers].splice(index, 1);\n  }\n}\nexport const internalRateLimitedQueue = Symbol('__queue');", "class NetworkError extends Error {\n  constructor(error, xhr) {\n    if (xhr === void 0) {\n      xhr = null;\n    }\n    super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n    this.cause = error;\n    this.isNetworkError = true;\n    this.request = xhr;\n  }\n}\nexport default NetworkError;", "function isNetworkError(xhr) {\n  if (!xhr) {\n    return false;\n  }\n  return xhr.readyState !== 0 && xhr.readyState !== 4 || xhr.status === 0;\n}\nexport default isNetworkError;", "function _classPrivateFieldLooseBase(e, t) { if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\"); return e; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(e) { return \"__private_\" + id++ + \"_\" + e; }\nvar _aliveTimer = /*#__PURE__*/_classPrivateFieldLooseKey(\"aliveTimer\");\nvar _isDone = /*#__PURE__*/_classPrivateFieldLooseKey(\"isDone\");\nvar _onTimedOut = /*#__PURE__*/_classPrivateFieldLooseKey(\"onTimedOut\");\nvar _timeout = /*#__PURE__*/_classPrivateFieldLooseKey(\"timeout\");\n/**\n * Helper to abort upload requests if there has not been any progress for `timeout` ms.\n * Create an instance using `timer = new ProgressTimeout(10000, onTimeout)`\n * Call `timer.progress()` to signal that there has been progress of any kind.\n * Call `timer.done()` when the upload has completed.\n */\nclass ProgressTimeout {\n  constructor(timeout,\n  // eslint-disable-next-line no-shadow\n  timeoutHandler) {\n    Object.defineProperty(this, _aliveTimer, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _isDone, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _onTimedOut, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _timeout, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldLooseBase(this, _timeout)[_timeout] = timeout;\n    _classPrivateFieldLooseBase(this, _onTimedOut)[_onTimedOut] = () => timeoutHandler(timeout);\n  }\n  progress() {\n    // Some browsers fire another progress event when the upload is\n    // cancelled, so we have to ignore progress after the timer was\n    // told to stop.\n    if (_classPrivateFieldLooseBase(this, _isDone)[_isDone]) return;\n    if (_classPrivateFieldLooseBase(this, _timeout)[_timeout] > 0) {\n      clearTimeout(_classPrivateFieldLooseBase(this, _aliveTimer)[_aliveTimer]);\n      _classPrivateFieldLooseBase(this, _aliveTimer)[_aliveTimer] = setTimeout(_classPrivateFieldLooseBase(this, _onTimedOut)[_onTimedOut], _classPrivateFieldLooseBase(this, _timeout)[_timeout]);\n    }\n  }\n  done() {\n    if (!_classPrivateFieldLooseBase(this, _isDone)[_isDone]) {\n      clearTimeout(_classPrivateFieldLooseBase(this, _aliveTimer)[_aliveTimer]);\n      _classPrivateFieldLooseBase(this, _aliveTimer)[_aliveTimer] = undefined;\n      _classPrivateFieldLooseBase(this, _isDone)[_isDone] = true;\n    }\n  }\n}\nexport default ProgressTimeout;", "import NetworkError from './NetworkError.js';\nimport ProgressTimeout from './ProgressTimeout.js';\nconst noop = () => {};\n/**\n * Fetches data from a specified URL using XMLHttpRequest, with optional retry functionality and progress tracking.\n *\n * @param url The URL to send the request to.\n * @param options Optional settings for the fetch operation.\n */\nexport function fetcher(url, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    body = null,\n    headers = {},\n    method = 'GET',\n    onBeforeRequest = noop,\n    onUploadProgress = noop,\n    shouldRetry = () => true,\n    onAfterResponse = noop,\n    onTimeout = noop,\n    responseType,\n    retries = 3,\n    signal = null,\n    timeout = 30000,\n    withCredentials = false\n  } = options;\n\n  // 300 ms, 600 ms, 1200 ms, 2400 ms, 4800 ms\n  const delay = attempt => 0.3 * 2 ** (attempt - 1) * 1000;\n  const timer = new ProgressTimeout(timeout, onTimeout);\n  function requestWithRetry(retryCount) {\n    if (retryCount === void 0) {\n      retryCount = 0;\n    }\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise(async (resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      const onError = error => {\n        if (shouldRetry(xhr) && retryCount < retries) {\n          setTimeout(() => {\n            requestWithRetry(retryCount + 1).then(resolve, reject);\n          }, delay(retryCount));\n        } else {\n          timer.done();\n          reject(error);\n        }\n      };\n      xhr.open(method, url, true);\n      xhr.withCredentials = withCredentials;\n      if (responseType) {\n        xhr.responseType = responseType;\n      }\n      signal == null || signal.addEventListener('abort', () => {\n        xhr.abort();\n        // Using DOMException for abort errors aligns with\n        // the convention established by the Fetch API.\n        reject(new DOMException('Aborted', 'AbortError'));\n      });\n      xhr.onload = async () => {\n        try {\n          await onAfterResponse(xhr, retryCount);\n        } catch (err) {\n          // This is important as we need to emit the xhr\n          // over the upload-error event.\n          err.request = xhr;\n          onError(err);\n          return;\n        }\n        if (xhr.status >= 200 && xhr.status < 300) {\n          timer.done();\n          resolve(xhr);\n        } else if (shouldRetry(xhr) && retryCount < retries) {\n          setTimeout(() => {\n            requestWithRetry(retryCount + 1).then(resolve, reject);\n          }, delay(retryCount));\n        } else {\n          timer.done();\n          reject(new NetworkError(xhr.statusText, xhr));\n        }\n      };\n      xhr.onerror = () => onError(new NetworkError(xhr.statusText, xhr));\n      xhr.upload.onprogress = event => {\n        timer.progress();\n        onUploadProgress(event);\n      };\n      if (headers) {\n        Object.keys(headers).forEach(key => {\n          xhr.setRequestHeader(key, headers[key]);\n        });\n      }\n      await onBeforeRequest(xhr, retryCount);\n      xhr.send(body);\n    });\n  }\n  return requestWithRetry();\n}", "export function filterNonFailedFiles(files) {\n  const hasError = file => 'error' in file && !!file.error;\n  return files.filter(file => !hasError(file));\n}\n\n// Don't double-emit upload-started for Golden Retriever-restored files that were already started\nexport function filterFilesToEmitUploadStarted(files) {\n  return files.filter(file => {\n    var _file$progress;\n    return !((_file$progress = file.progress) != null && _file$progress.uploadStarted) || !file.isRestored;\n  });\n}", "export default function getAllowedMetaFields(fields, meta) {\n  if (fields === true) {\n    return Object.keys(meta);\n  }\n  if (Array.isArray(fields)) {\n    return fields;\n  }\n  return [];\n}", "export default {\n  strings: {\n    // Shown in the Informer if an upload is being canceled because it stalled for too long.\n    uploadStalled: 'Upload has not made any progress for %{seconds} seconds. You may want to retry it.'\n  }\n};", "function _classPrivateFieldLooseBase(e, t) { if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\"); return e; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(e) { return \"__private_\" + id++ + \"_\" + e; }\nimport { BasePlugin } from '@uppy/core';\nimport EventManager from '@uppy/core/lib/EventManager.js';\nimport { RateLimitedQueue, internalRateLimitedQueue\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore untyped\n} from '@uppy/utils/lib/RateLimitedQueue';\nimport NetworkError from '@uppy/utils/lib/NetworkError';\nimport isNetworkError from '@uppy/utils/lib/isNetworkError';\nimport { fetcher } from '@uppy/utils/lib/fetcher';\nimport { filterNonFailedFiles, filterFilesToEmitUploadStarted } from '@uppy/utils/lib/fileFilters';\nimport getAllowedMetaFields from '@uppy/utils/lib/getAllowedMetaFields';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nconst packageJson = {\n  \"version\": \"4.3.3\"\n};\nimport locale from './locale.js';\nfunction buildResponseError(xhr, err) {\n  let error = err;\n  // No error message\n  if (!error) error = new Error('Upload error');\n  // Got an error message string\n  if (typeof error === 'string') error = new Error(error);\n  // Got something else\n  if (!(error instanceof Error)) {\n    error = Object.assign(new Error('Upload error'), {\n      data: error\n    });\n  }\n  if (isNetworkError(xhr)) {\n    error = new NetworkError(error, xhr);\n    return error;\n  }\n\n  // @ts-expect-error request can only be set on NetworkError\n  // but we use NetworkError to distinguish between errors.\n  error.request = xhr;\n  return error;\n}\n\n/**\n * Set `data.type` in the blob to `file.meta.type`,\n * because we might have detected a more accurate file type in Uppy\n * https://stackoverflow.com/a/50875615\n */\nfunction setTypeInBlob(file) {\n  const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type);\n  return dataWithUpdatedType;\n}\nconst defaultOptions = {\n  formData: true,\n  fieldName: 'file',\n  method: 'post',\n  allowedMetaFields: true,\n  bundle: false,\n  headers: {},\n  timeout: 30 * 1000,\n  limit: 5,\n  withCredentials: false,\n  responseType: ''\n};\nvar _getFetcher = /*#__PURE__*/_classPrivateFieldLooseKey(\"getFetcher\");\nvar _uploadLocalFile = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadLocalFile\");\nvar _uploadBundle = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadBundle\");\nvar _getCompanionClientArgs = /*#__PURE__*/_classPrivateFieldLooseKey(\"getCompanionClientArgs\");\nvar _uploadFiles = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadFiles\");\nvar _handleUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleUpload\");\nexport default class XHRUpload extends BasePlugin {\n  constructor(uppy, _opts) {\n    super(uppy, {\n      ...defaultOptions,\n      fieldName: _opts.bundle ? 'files[]' : 'file',\n      ..._opts\n    });\n    Object.defineProperty(this, _uploadFiles, {\n      value: _uploadFiles2\n    });\n    Object.defineProperty(this, _getCompanionClientArgs, {\n      value: _getCompanionClientArgs2\n    });\n    Object.defineProperty(this, _uploadBundle, {\n      value: _uploadBundle2\n    });\n    Object.defineProperty(this, _uploadLocalFile, {\n      value: _uploadLocalFile2\n    });\n    Object.defineProperty(this, _getFetcher, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _handleUpload, {\n      writable: true,\n      value: async fileIDs => {\n        if (fileIDs.length === 0) {\n          this.uppy.log('[XHRUpload] No files to upload!');\n          return;\n        }\n\n        // No limit configured by the user, and no RateLimitedQueue passed in by a \"parent\" plugin\n        // (basically just AwsS3) using the internal symbol\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore untyped internal\n        if (this.opts.limit === 0 && !this.opts[internalRateLimitedQueue]) {\n          this.uppy.log('[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0', 'warning');\n        }\n        this.uppy.log('[XHRUpload] Uploading...');\n        const files = this.uppy.getFilesByIds(fileIDs);\n        const filesFiltered = filterNonFailedFiles(files);\n        const filesToEmit = filterFilesToEmitUploadStarted(filesFiltered);\n        this.uppy.emit('upload-start', filesToEmit);\n        if (this.opts.bundle) {\n          // if bundle: true, we don\u2019t support remote uploads\n          const isSomeFileRemote = filesFiltered.some(file => file.isRemote);\n          if (isSomeFileRemote) {\n            throw new Error('Can\u2019t upload remote files when the `bundle: true` option is set');\n          }\n          if (typeof this.opts.headers === 'function') {\n            throw new TypeError('`headers` may not be a function when the `bundle: true` option is set');\n          }\n          await _classPrivateFieldLooseBase(this, _uploadBundle)[_uploadBundle](filesFiltered);\n        } else {\n          await _classPrivateFieldLooseBase(this, _uploadFiles)[_uploadFiles](filesFiltered);\n        }\n      }\n    });\n    this.type = 'uploader';\n    this.id = this.opts.id || 'XHRUpload';\n    this.defaultLocale = locale;\n    this.i18nInit();\n\n    // Simultaneous upload limiting is shared across all uploads with this plugin.\n    if (internalRateLimitedQueue in this.opts) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore untyped internal\n      this.requests = this.opts[internalRateLimitedQueue];\n    } else {\n      this.requests = new RateLimitedQueue(this.opts.limit);\n    }\n    if (this.opts.bundle && !this.opts.formData) {\n      throw new Error('`opts.formData` must be true when `opts.bundle` is enabled.');\n    }\n    if (this.opts.bundle && typeof this.opts.headers === 'function') {\n      throw new Error('`opts.headers` can not be a function when the `bundle: true` option is set.');\n    }\n    if ((_opts == null ? void 0 : _opts.allowedMetaFields) === undefined && 'metaFields' in this.opts) {\n      throw new Error('The `metaFields` option has been renamed to `allowedMetaFields`.');\n    }\n    this.uploaderEvents = Object.create(null);\n    /**\n     * xhr-upload wrapper for `fetcher` to handle user options\n     * `validateStatus`, `getResponseError`, `getResponseData`\n     * and to emit `upload-progress`, `upload-error`, and `upload-success` events.\n     */\n    _classPrivateFieldLooseBase(this, _getFetcher)[_getFetcher] = files => {\n      return async (url, options) => {\n        try {\n          var _this$opts$getRespons, _this$opts2, _body3;\n          const res = await fetcher(url, {\n            ...options,\n            onBeforeRequest: (xhr, retryCount) => {\n              var _this$opts$onBeforeRe, _this$opts;\n              return (_this$opts$onBeforeRe = (_this$opts = this.opts).onBeforeRequest) == null ? void 0 : _this$opts$onBeforeRe.call(_this$opts, xhr, retryCount, files);\n            },\n            shouldRetry: this.opts.shouldRetry,\n            onAfterResponse: this.opts.onAfterResponse,\n            onTimeout: timeout => {\n              const seconds = Math.ceil(timeout / 1000);\n              const error = new Error(this.i18n('uploadStalled', {\n                seconds\n              }));\n              this.uppy.emit('upload-stalled', error, files);\n            },\n            onUploadProgress: event => {\n              if (event.lengthComputable) {\n                for (const {\n                  id\n                } of files) {\n                  var _file$progress$upload;\n                  const file = this.uppy.getFile(id);\n                  this.uppy.emit('upload-progress', file, {\n                    uploadStarted: (_file$progress$upload = file.progress.uploadStarted) != null ? _file$progress$upload : 0,\n                    bytesUploaded: event.loaded / event.total * file.size,\n                    bytesTotal: file.size\n                  });\n                }\n              }\n            }\n          });\n          let body = await ((_this$opts$getRespons = (_this$opts2 = this.opts).getResponseData) == null ? void 0 : _this$opts$getRespons.call(_this$opts2, res));\n          if (res.responseType === 'json') {\n            var _body;\n            (_body = body) != null ? _body : body = res.response;\n          } else {\n            try {\n              var _body2;\n              (_body2 = body) != null ? _body2 : body = JSON.parse(res.responseText);\n            } catch (cause) {\n              throw new Error('@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.', {\n                cause\n              });\n            }\n          }\n          const uploadURL = typeof ((_body3 = body) == null ? void 0 : _body3.url) === 'string' ? body.url : undefined;\n          for (const {\n            id\n          } of files) {\n            this.uppy.emit('upload-success', this.uppy.getFile(id), {\n              status: res.status,\n              body,\n              uploadURL\n            });\n          }\n          return res;\n        } catch (error) {\n          if (error.name === 'AbortError') {\n            return undefined;\n          }\n          const request = error.request;\n          for (const file of files) {\n            this.uppy.emit('upload-error', this.uppy.getFile(file.id), buildResponseError(request, error), request);\n          }\n          throw error;\n        }\n      };\n    };\n  }\n  getOptions(file) {\n    const overrides = this.uppy.getState().xhrUpload;\n    const {\n      headers\n    } = this.opts;\n    const opts = {\n      ...this.opts,\n      ...(overrides || {}),\n      ...(file.xhrUpload || {}),\n      headers: {}\n    };\n    // Support for `headers` as a function, only in the XHRUpload settings.\n    // Options set by other plugins in Uppy state or on the files themselves are still merged in afterward.\n    //\n    // ```js\n    // headers: (file) => ({ expires: file.meta.expires })\n    // ```\n    if (typeof headers === 'function') {\n      opts.headers = headers(file);\n    } else {\n      Object.assign(opts.headers, this.opts.headers);\n    }\n    if (overrides) {\n      Object.assign(opts.headers, overrides.headers);\n    }\n    if (file.xhrUpload) {\n      Object.assign(opts.headers, file.xhrUpload.headers);\n    }\n    return opts;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  addMetadata(formData, meta, opts) {\n    const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, meta);\n    allowedMetaFields.forEach(item => {\n      const value = meta[item];\n      if (Array.isArray(value)) {\n        // In this case we don't transform `item` to add brackets, it's up to\n        // the user to add the brackets so it won't be overridden.\n        value.forEach(subItem => formData.append(item, subItem));\n      } else {\n        formData.append(item, value);\n      }\n    });\n  }\n  createFormDataUpload(file, opts) {\n    const formPost = new FormData();\n    this.addMetadata(formPost, file.meta, opts);\n    const dataWithUpdatedType = setTypeInBlob(file);\n    if (file.name) {\n      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name);\n    } else {\n      formPost.append(opts.fieldName, dataWithUpdatedType);\n    }\n    return formPost;\n  }\n  createBundledUpload(files, opts) {\n    const formPost = new FormData();\n    const {\n      meta\n    } = this.uppy.getState();\n    this.addMetadata(formPost, meta, opts);\n    files.forEach(file => {\n      const options = this.getOptions(file);\n      const dataWithUpdatedType = setTypeInBlob(file);\n      if (file.name) {\n        formPost.append(options.fieldName, dataWithUpdatedType, file.name);\n      } else {\n        formPost.append(options.fieldName, dataWithUpdatedType);\n      }\n    });\n    return formPost;\n  }\n  install() {\n    if (this.opts.bundle) {\n      const {\n        capabilities\n      } = this.uppy.getState();\n      this.uppy.setState({\n        capabilities: {\n          ...capabilities,\n          individualCancellation: false\n        }\n      });\n    }\n    this.uppy.addUploader(_classPrivateFieldLooseBase(this, _handleUpload)[_handleUpload]);\n  }\n  uninstall() {\n    if (this.opts.bundle) {\n      const {\n        capabilities\n      } = this.uppy.getState();\n      this.uppy.setState({\n        capabilities: {\n          ...capabilities,\n          individualCancellation: true\n        }\n      });\n    }\n    this.uppy.removeUploader(_classPrivateFieldLooseBase(this, _handleUpload)[_handleUpload]);\n  }\n}\nasync function _uploadLocalFile2(file) {\n  const events = new EventManager(this.uppy);\n  const controller = new AbortController();\n  const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n    const opts = this.getOptions(file);\n    const fetch = _classPrivateFieldLooseBase(this, _getFetcher)[_getFetcher]([file]);\n    const body = opts.formData ? this.createFormDataUpload(file, opts) : file.data;\n    return fetch(opts.endpoint, {\n      ...opts,\n      body,\n      signal: controller.signal\n    });\n  });\n  events.onFileRemove(file.id, () => controller.abort());\n  events.onCancelAll(file.id, () => {\n    controller.abort();\n  });\n  try {\n    await uppyFetch().abortOn(controller.signal);\n  } catch (error) {\n    // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n    if (error.message !== 'Cancelled') {\n      throw error;\n    }\n  } finally {\n    events.remove();\n  }\n}\nasync function _uploadBundle2(files) {\n  const controller = new AbortController();\n  const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n    var _this$uppy$getState$x;\n    const optsFromState = (_this$uppy$getState$x = this.uppy.getState().xhrUpload) != null ? _this$uppy$getState$x : {};\n    const fetch = _classPrivateFieldLooseBase(this, _getFetcher)[_getFetcher](files);\n    const body = this.createBundledUpload(files, {\n      ...this.opts,\n      ...optsFromState\n    });\n    return fetch(this.opts.endpoint, {\n      // headers can't be a function with bundle: true\n      ...this.opts,\n      body,\n      signal: controller.signal\n    });\n  });\n  function abort() {\n    controller.abort();\n  }\n\n  // We only need to abort on cancel all because\n  // individual cancellations are not possible with bundle: true\n  this.uppy.once('cancel-all', abort);\n  try {\n    await uppyFetch().abortOn(controller.signal);\n  } catch (error) {\n    // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n    if (error.message !== 'Cancelled') {\n      throw error;\n    }\n  } finally {\n    this.uppy.off('cancel-all', abort);\n  }\n}\nfunction _getCompanionClientArgs2(file) {\n  var _file$remote;\n  const opts = this.getOptions(file);\n  const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, file.meta);\n  return {\n    ...((_file$remote = file.remote) == null ? void 0 : _file$remote.body),\n    protocol: 'multipart',\n    endpoint: opts.endpoint,\n    size: file.data.size,\n    fieldname: opts.fieldName,\n    metadata: Object.fromEntries(allowedMetaFields.map(name => [name, file.meta[name]])),\n    httpMethod: opts.method,\n    useFormData: opts.formData,\n    headers: opts.headers\n  };\n}\nasync function _uploadFiles2(files) {\n  await Promise.allSettled(files.map(file => {\n    if (file.isRemote) {\n      const getQueue = () => this.requests;\n      const controller = new AbortController();\n      const removedHandler = removedFile => {\n        if (removedFile.id === file.id) controller.abort();\n      };\n      this.uppy.on('file-removed', removedHandler);\n      const uploadPromise = this.uppy.getRequestClientForFile(file).uploadRemoteFile(file, _classPrivateFieldLooseBase(this, _getCompanionClientArgs)[_getCompanionClientArgs](file), {\n        signal: controller.signal,\n        getQueue\n      });\n      this.requests.wrapSyncFunction(() => {\n        this.uppy.off('file-removed', removedHandler);\n      }, {\n        priority: -1\n      })();\n      return uploadPromise;\n    }\n    return _classPrivateFieldLooseBase(this, _uploadLocalFile)[_uploadLocalFile](file);\n  }));\n}\n// eslint-disable-next-line global-require\nXHRUpload.VERSION = packageJson.version;"],
  "mappings": "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",
  "names": ["_classPrivateFieldLooseBase", "e", "t", "id", "_classPrivateFieldLooseKey", "_uppy", "_events", "EventManager", "uppy", "event", "fn", "fileID", "cb", "file", "isPaused", "eventHandler", "_this", "_classPrivateFieldLooseBase", "e", "t", "id", "_classPrivateFieldLooseKey", "createCancelError", "cause", "abortOn", "signal", "_this$then", "abortPromise", "removeAbortListener", "_activeRequests", "_queuedHandlers", "_paused", "_pauseTimer", "_downLimit", "_upperLimit", "_rateLimitingTimer", "_call", "_queueNext", "_next", "_queue", "_dequeue", "_resume", "_increaseLimit", "RateLimitedQueue", "limit", "_dequeue2", "_queue2", "_next2", "_queueNext2", "_call2", "i", "fn", "queueOptions", "_this", "_len", "args", "_key", "queuedRequest", "_this2", "_len2", "_key2", "outerPromise", "resolve", "reject", "cancelError", "innerPromise", "err", "result", "duration", "done", "cancelActive", "next", "handler", "options", "index", "other", "internalRateLimitedQueue", "NetworkError", "error", "xhr", "NetworkError_default", "isNetworkError", "xhr", "isNetworkError_default", "_classPrivateFieldLooseBase", "e", "t", "id", "_classPrivateFieldLooseKey", "_aliveTimer", "_isDone", "_onTimedOut", "_timeout", "ProgressTimeout", "timeout", "timeoutHandler", "ProgressTimeout_default", "noop", "fetcher", "url", "options", "body", "headers", "method", "onBeforeRequest", "onUploadProgress", "shouldRetry", "onAfterResponse", "onTimeout", "responseType", "retries", "signal", "timeout", "withCredentials", "delay", "attempt", "timer", "ProgressTimeout_default", "requestWithRetry", "retryCount", "resolve", "reject", "xhr", "onError", "error", "err", "NetworkError_default", "event", "key", "filterNonFailedFiles", "files", "hasError", "file", "filterFilesToEmitUploadStarted", "_file$progress", "getAllowedMetaFields", "fields", "meta", "locale_default", "_classPrivateFieldLooseBase", "e", "t", "id", "_classPrivateFieldLooseKey", "packageJson", "buildResponseError", "xhr", "err", "error", "isNetworkError_default", "NetworkError_default", "setTypeInBlob", "file", "defaultOptions", "_getFetcher", "_uploadLocalFile", "_uploadBundle", "_getCompanionClientArgs", "_uploadFiles", "_handleUpload", "XHRUpload", "BasePlugin", "uppy", "_opts", "_uploadFiles2", "_getCompanionClientArgs2", "_uploadBundle2", "_uploadLocalFile2", "fileIDs", "internalRateLimitedQueue", "files", "filesFiltered", "filterNonFailedFiles", "filesToEmit", "filterFilesToEmitUploadStarted", "locale_default", "RateLimitedQueue", "url", "options", "_this$opts$getRespons", "_this$opts2", "_body3", "res", "fetcher", "retryCount", "_this$opts$onBeforeRe", "_this$opts", "timeout", "seconds", "event", "_file$progress$upload", "body", "_body", "_body2", "cause", "uploadURL", "request", "overrides", "headers", "opts", "formData", "meta", "getAllowedMetaFields", "item", "value", "subItem", "formPost", "dataWithUpdatedType", "capabilities", "events", "EventManager", "controller", "uppyFetch", "fetch", "_this$uppy$getState$x", "optsFromState", "abort", "_file$remote", "allowedMetaFields", "name", "getQueue", "removedHandler", "removedFile", "uploadPromise"]
}
